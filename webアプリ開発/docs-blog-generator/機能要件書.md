# ブログ記事執筆支援Webアプリケーション 機能要件書

## 1. プロジェクト概要

### 1.1 目的
ブログ記事の執筆を段階的にサポートし、ユーザーがテーマから完成記事まで迷わず作成できるWebアプリケーションを提供する。

### 1.2 ターゲットユーザー
- ブログ記事を定期的に執筆する個人・法人
- 記事の構成に悩む初心者〜中級者ブロガー
- 効率的に質の高い記事を作成したい方

### 1.3 コアバリュー
- **段階的な執筆フロー**: テーマ → 見出し → 目次 → 本文と順を追って作成
- **柔軟な編集機能**: AI生成結果を自由に修正・再生成可能
- **直感的なUI/UX**: 初心者でも迷わず操作できるインターフェース

---

## 2. MVP（最小限の実装）機能要件

### 2.1 ステップ1: テーマ入力機能

#### 2.1.1 基本機能
- **機能ID**: F-001
- **機能名**: テーマ入力フォーム
- **説明**: ユーザーが記事のテーマを入力する
- **入力項目**:
  - 記事テーマ（必須、テキストエリア、最大500文字）
- **バリデーション**:
  - 空欄チェック
  - 文字数制限チェック
- **画面遷移**: 入力完了後、「見出し生成」ボタンで次ステップへ

#### 2.1.2 UI要件
- シンプルな1カラムレイアウト
- プレースホルダーで入力例を表示
- 文字数カウンター表示

---

### 2.2 ステップ2: 見出し生成・選択機能

#### 2.2.1 見出し生成機能
- **機能ID**: F-002
- **機能名**: 見出し候補生成
- **説明**: 入力されたテーマをもとに、AIが複数の見出し候補を生成
- **生成数**: 3〜5個の見出し候補
- **表示内容**: 
  - 見出しテキスト
  - 簡単な説明文（1〜2行）

#### 2.2.2 見出し選択機能
- **機能ID**: F-003
- **機能名**: 見出し選択
- **説明**: 生成された見出し候補から1つを選択
- **操作**:
  - ラジオボタンまたはカード選択形式
  - 1つのみ選択可能

#### 2.2.3 再生成機能
- **機能ID**: F-004
- **機能名**: 見出し再生成
- **説明**: 気に入った見出しがない場合、再度生成
- **操作**: 「再生成」ボタンをクリック
- **制限**: 再生成回数の上限設定（例: 5回まで）

#### 2.2.4 UI要件
- ローディング表示（生成中）
- 各見出し候補をカード形式で表示
- 選択状態の視覚的フィードバック
- 「前のステップに戻る」ボタン

---

### 2.3 ステップ3: 目次生成・編集機能

#### 2.3.1 目次生成機能
- **機能ID**: F-005
- **機能名**: 目次自動生成
- **説明**: 選択された見出しをもとに、記事の目次（章立て）を生成
- **生成内容**:
  - 大見出し（H2レベル）: 3〜5個
  - 中見出し（H3レベル）: 各H2に対して2〜4個
- **表示形式**: 階層構造で表示

#### 2.3.2 目次編集機能
- **機能ID**: F-006
- **機能名**: 目次項目の編集
- **説明**: 生成された目次を自由に編集
- **編集操作**:
  - テキスト編集（インライン編集）
  - 項目の追加
  - 項目の削除
  - 順序の入れ替え（ドラッグ&ドロップ）

#### 2.3.3 目次再生成機能
- **機能ID**: F-007
- **機能名**: 目次全体の再生成
- **説明**: 目次全体を再度生成し直す
- **操作**: 「目次を再生成」ボタン
- **注意**: 編集内容は破棄される旨の確認ダイアログ表示

#### 2.3.4 UI要件
- 階層構造の視覚的表現（インデント、色分けなど）
- ドラッグハンドルの表示
- 編集モードと表示モードの切り替え
- 「前のステップに戻る」「次へ進む」ボタン

---

### 2.4 ステップ4: 本文生成・編集機能

#### 2.4.1 本文生成機能
- **機能ID**: F-008
- **機能名**: セクション別本文生成
- **説明**: 目次の各項目（セクション）ごとに本文を生成
- **生成方式**:
  - 1セクションずつ順番に生成
  - または、全セクション一括生成（選択可能）
- **生成内容**:
  - 各セクションに対応する本文（300〜800文字程度）
  - 自然な文章の流れ

#### 2.4.2 セクション別再生成機能
- **機能ID**: F-009
- **機能名**: セクション単位の再生成
- **説明**: 特定のセクションのみ再生成
- **操作**: 各セクションに「再生成」ボタン配置
- **保持**: 他のセクションは変更されない

#### 2.4.3 本文編集機能
- **機能ID**: F-010
- **機能名**: 本文の手動編集
- **説明**: 生成された本文を自由に編集
- **エディタ要件**:
  - テキストエリアまたはシンプルなリッチテキストエディタ
  - リアルタイム文字数カウント
  - 基本的なフォーマット（太字、リスト程度）

#### 2.4.4 UI要件
- セクションごとにアコーディオン表示
- 生成中のローディング表示（ストリーミング対応が望ましい）
- 編集エリアの拡大/縮小機能
- 全体プレビュー機能

---

### 2.5 ステップ5: プレビュー・エクスポート機能

#### 2.5.1 プレビュー機能
- **機能ID**: F-011
- **機能名**: 記事全体プレビュー
- **説明**: 完成した記事を実際のブログ風に表示
- **表示内容**:
  - タイトル（見出し）
  - 目次
  - 本文（全セクション）
- **表示形式**: Markdown形式でレンダリング

#### 2.5.2 エクスポート機能
- **機能ID**: F-012
- **機能名**: 記事のエクスポート
- **説明**: 完成した記事をファイルとしてダウンロード
- **対応形式**:
  - Markdown (.md)
  - HTML (.html)
  - プレーンテキスト (.txt)
- **操作**: 「ダウンロード」ボタンで形式選択

#### 2.5.3 UI要件
- プレビューと編集の切り替え
- ダウンロード形式選択のドロップダウン
- 「編集に戻る」ボタン

---

### 2.6 共通機能

#### 2.6.1 プログレスバー
- **機能ID**: F-013
- **機能名**: 進捗表示
- **説明**: 現在どのステップにいるか表示
- **表示内容**:
  1. テーマ入力
  2. 見出し選択
  3. 目次作成
  4. 本文生成
  5. プレビュー
- **UI要件**: 画面上部に常時表示、現在位置をハイライト

#### 2.6.2 戻る機能
- **機能ID**: F-014
- **機能名**: 前ステップへの移動
- **説明**: 任意のステップから前のステップに戻れる
- **データ保持**: 戻った際も入力/選択内容は保持
- **注意**: 再生成を実行した場合は上書き確認

#### 2.6.3 一時保存機能
- **機能ID**: F-015
- **機能名**: 作業内容の自動保存
- **説明**: ブラウザを閉じても作業を再開できる
- **保存方式**: ローカルストレージに自動保存
- **保存タイミング**: 各ステップ完了時、または一定時間ごと
- **制限**: 1プロジェクトのみ保存（複数プロジェクト管理は将来機能）

#### 2.6.4 エラーハンドリング
- **機能ID**: F-016
- **機能名**: エラー表示・リトライ
- **説明**: API呼び出し失敗時の対応
- **表示内容**:
  - エラーメッセージ（ユーザーフレンドリーな表現）
  - 「再試行」ボタン
- **対応エラー**:
  - ネットワークエラー
  - APIレート制限
  - タイムアウト

---

## 3. 非機能要件（MVP）

### 3.1 パフォーマンス
- **応答時間**: 
  - 見出し生成: 10秒以内
  - 目次生成: 15秒以内
  - 本文生成（1セクション）: 20秒以内
- **ストリーミング**: 可能であれば生成中の文章をリアルタイム表示

### 3.2 ブラウザ対応
- **対応ブラウザ**:
  - Chrome（最新版）
  - Firefox（最新版）
  - Safari（最新版）
  - Edge（最新版）
- **レスポンシブ**: デスクトップ優先（モバイル対応は将来機能）

### 3.3 セキュリティ
- **APIキー管理**: 環境変数で管理、クライアントに露出しない
- **入力サニタイゼーション**: XSS対策
- **HTTPS**: 本番環境では必須

### 3.4 可用性
- **稼働時間**: 99%以上（目標）
- **バックアップ**: ユーザーデータはローカルストレージ（MVP段階）

---

## 4. 技術的制約

### 4.1 外部API
- **使用API**: 
  - OpenAI API (ChatGPT) または
  - Anthropic API (Claude)
- **レート制限**: APIプロバイダーの制限に準拠
- **コスト管理**: 初期は使用量を監視

### 4.2 データ保存
- **MVP段階**: ローカルストレージのみ
- **データ構造**: JSON形式
- **容量制限**: ブラウザの制限内（通常5〜10MB）

---

## 5. 画面一覧（MVP）

| 画面ID | 画面名 | 説明 |
|--------|--------|------|
| S-001 | テーマ入力画面 | 記事テーマを入力 |
| S-002 | 見出し選択画面 | 生成された見出し候補から選択 |
| S-003 | 目次編集画面 | 目次の確認・編集 |
| S-004 | 本文生成・編集画面 | セクションごとの本文生成・編集 |
| S-005 | プレビュー・エクスポート画面 | 完成記事の確認とダウンロード |

---

## 6. 将来的な拡張機能（MVP後の実装候補）

### 6.1 高度な入力オプション
- ターゲット読者の指定
- 記事の目的選択（SEO/教育/エンタメ）
- 文体の選択（カジュアル/フォーマル）
- 参考URL入力

### 6.2 高度な編集機能
- 見出し候補の組み合わせ選択
- 目次項目ごとの想定文字数設定
- トーン調整スライダー
- 前後のセクションを考慮した一貫性保持

### 6.3 SEO支援機能
- キーワード密度チェック
- メタディスクリプション生成
- タイトルタグ最適化提案

### 6.4 プロジェクト管理
- 複数記事の並行作成
- 記事の保存・読み込み
- 履歴管理（生成バージョン管理）

### 6.5 コラボレーション
- ユーザー認証
- クラウド保存
- 共有・コメント機能

### 6.6 高度なエクスポート
- WordPress直接投稿
- 画像挿入位置の提案
- 各種CMSフォーマット対応

### 6.7 テンプレート機能
- 記事タイプ別テンプレート
- カスタムテンプレート作成

### 6.8 学習機能
- ユーザーの修正パターン学習
- パーソナライズされた提案

---

## 7. 成功指標（KPI）

### 7.1 MVP段階での測定項目
- **完遂率**: テーマ入力から記事エクスポートまでの完了率
- **平均所要時間**: 1記事作成にかかる時間
- **再生成回数**: 各ステップでの平均再生成回数
- **エラー発生率**: API呼び出し失敗率

### 7.2 目標値（MVP）
- 完遂率: 70%以上
- 平均所要時間: 15分以内
- エラー発生率: 5%以下

---

## 8. 開発優先順位

### Phase 1（最優先 - MVP Core）
1. テーマ入力機能（F-001）
2. 見出し生成・選択機能（F-002, F-003）
3. 目次生成機能（F-005）
4. 本文生成機能（F-008）
5. プレビュー・エクスポート機能（F-011, F-012）
6. プログレスバー（F-013）

### Phase 2（MVP完成）
1. 見出し再生成機能（F-004）
2. 目次編集機能（F-006, F-007）
3. セクション別再生成・編集機能（F-009, F-010）
4. 戻る機能（F-014）
5. 一時保存機能（F-015）
6. エラーハンドリング（F-016）

### Phase 3（拡張機能）
- 将来的な拡張機能から優先度の高いものを実装

---

## 9. 備考

### 9.1 設計方針
- **シンプル第一**: 機能を詰め込みすぎず、コアな体験に集中
- **段階的な改善**: ユーザーフィードバックをもとに機能追加
- **技術的負債の最小化**: 拡張性を考慮した設計

### 9.2 ユーザーフィードバック
- MVP リリース後、ユーザーテストを実施
- 使いにくい箇所、欲しい機能を収集
- データ分析で離脱ポイントを特定

---

**文書バージョン**: 1.0  
**作成日**: 2025年12月1日  
**最終更新日**: 2025年12月1日

