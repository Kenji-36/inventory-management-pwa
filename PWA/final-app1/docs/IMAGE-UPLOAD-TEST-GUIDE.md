# 📸 画像アップロード機能 テストガイド（初学者向け）

このガイドでは、商品画像のアップロード機能を実際に使ってテストする方法を、ステップバイステップで説明します。

---

## 🎯 このガイドの目的

- 商品に画像をアップロードする方法を学ぶ
- アップロードした画像が正しく表示されることを確認する
- 画像の削除方法を学ぶ

---

## 📋 事前準備

### 1. 必要なもの

- ✅ アプリが起動していること（`npm run dev`）
- ✅ ブラウザでログイン済み
- ✅ テスト用の画像ファイル（JPEG、PNG、WebP形式、5MB以下）

### 2. テスト用画像の準備

以下のような画像を用意してください：

**推奨する画像**:
- 📱 スマホで撮影した商品写真
- 🖼️ インターネットからダウンロードした商品画像
- 🎨 自分で作成した画像

**画像の条件**:
- ✅ **形式**: JPEG（.jpg）、PNG（.png）、WebP（.webp）
- ✅ **サイズ**: 5MB以下
- ✅ **推奨サイズ**: 800x800ピクセル程度（大きすぎない方が良い）

**NGな画像**:
- ❌ GIF形式（.gif）
- ❌ 5MBを超える画像
- ❌ PDF、Word、Excel などの文書ファイル

---

## 🚀 ステップ1: アプリにログイン

### 1.1 ブラウザを開く

1. Google Chrome または Microsoft Edge を開く
2. アドレスバーに `http://localhost:3000` と入力
3. Enter キーを押す

### 1.2 ログインする

1. **「Googleでログイン」** ボタンをクリック
2. Googleアカウントを選択
3. ログインが完了すると、ダッシュボードが表示されます

---

## 📦 ステップ2: 在庫管理ページに移動

### 2.1 在庫管理ページを開く

1. 画面左側のメニューから **「在庫管理」** をクリック
2. 商品一覧が表示されます

### 2.2 商品を選択する

1. 商品一覧から、画像をアップロードしたい商品を探す
2. 商品の右側にある **「詳細」** ボタンをクリック

**例**: 「ポロシャツ S」という商品を選択

---

## 📸 ステップ3: 画像をアップロードする

### 3.1 商品詳細ページを確認

商品詳細ページが開くと、以下のような画面が表示されます：

```
┌─────────────────────────────────────┐
│  商品画像                            │
│  ┌───────────────────────────┐      │
│  │                           │      │
│  │   画像が登録されていません    │      │
│  │                           │      │
│  └───────────────────────────┘      │
│  [画像をアップロード]                │
└─────────────────────────────────────┘
```

### 3.2 画像をアップロードする

**方法1: ボタンをクリック**

1. **「画像をアップロード」** ボタンをクリック
2. ファイル選択ダイアログが開きます
3. 用意した画像ファイルを選択
4. **「開く」** ボタンをクリック

**方法2: ドラッグ＆ドロップ（対応している場合）**

1. エクスプローラーで画像ファイルを開く
2. 画像ファイルを画面の画像エリアにドラッグ
3. マウスボタンを離す（ドロップ）

### 3.3 アップロード中の表示

画像を選択すると、以下のような表示になります：

```
┌─────────────────────────────────────┐
│  商品画像                            │
│  ┌───────────────────────────┐      │
│  │                           │      │
│  │   アップロード中...       │      │
│  │   ⏳ 読み込み中           │      │
│  │                           │      │
│  └───────────────────────────┘      │
└─────────────────────────────────────┘
```

**待ち時間**: 通常、数秒で完了します

### 3.4 アップロード完了

アップロードが完了すると、画像が表示されます：

```
┌─────────────────────────────────────┐
│  商品画像                            │
│  ┌───────────────────────────┐      │
│  │                           │      │
│  │   [商品の画像が表示]       │      │
│  │                           │      │
│  └───────────────────────────┘      │
│  [画像を変更]                        │
└─────────────────────────────────────┘
```

✅ **成功メッセージ**: 画面右上に「画像をアップロードしました」と表示されます

---

## ✅ ステップ4: アップロードした画像を確認する

### 4.1 商品詳細ページで確認

商品詳細ページで、アップロードした画像が表示されていることを確認します。

**確認ポイント**:
- ✅ 画像が鮮明に表示されている
- ✅ 画像が切れていない
- ✅ 正しい商品の画像である

### 4.2 商品一覧ページで確認

1. ブラウザの **「戻る」** ボタンをクリック（または左上の「←」ボタン）
2. 商品一覧ページに戻ります
3. 先ほど画像をアップロードした商品を探します

**確認ポイント**:
- ✅ 商品の左側に **サムネイル画像** が表示されている
- ✅ サムネイル画像が正しい商品の画像である

```
商品一覧の表示例:

┌────────────────────────────────────────┐
│ [📷] ポロシャツ S    在庫: 2  [詳細]   │
│      MLS-101                           │
└────────────────────────────────────────┘
     ↑
   サムネイル画像が表示される
```

### 4.3 注文画面で確認

1. 画面左側のメニューから **「新規注文」** をクリック
2. 商品一覧が表示されます
3. 画像をアップロードした商品を探します

**確認ポイント**:
- ✅ 商品の画像が表示されている
- ✅ カートに追加した時も画像が表示される

---

## 🗑️ ステップ5: 画像を削除する（オプション）

### 5.1 商品詳細ページを開く

1. 在庫管理ページから商品を選択
2. 商品詳細ページを開く

### 5.2 画像を削除する

1. 画像の上にマウスを移動
2. 右上に **「×」ボタン** が表示されます
3. **「×」ボタン** をクリック
4. 確認ダイアログが表示されます：
   ```
   画像を削除しますか？
   [キャンセル] [OK]
   ```
5. **「OK」** をクリック

### 5.3 削除完了

✅ **成功メッセージ**: 「画像を削除しました」と表示されます

画像エリアが元の状態に戻ります：

```
┌─────────────────────────────────────┐
│  商品画像                            │
│  ┌───────────────────────────┐      │
│  │                           │      │
│  │   画像が登録されていません    │      │
│  │                           │      │
│  └───────────────────────────┘      │
│  [画像をアップロード]                │
└─────────────────────────────────────┘
```

---

## 🔍 ステップ6: 複数の商品で試す

### 6.1 他の商品にも画像をアップロード

1. 在庫管理ページに戻る
2. 別の商品を選択
3. ステップ3〜4を繰り返す

**おすすめ**: 3〜5個の商品に画像をアップロードしてみましょう

### 6.2 商品一覧で確認

商品一覧ページで、複数の商品に画像が表示されることを確認します。

```
商品一覧の表示例:

┌────────────────────────────────────────┐
│ [📷] ポロシャツ S    在庫: 2  [詳細]   │
│      MLS-101                           │
├────────────────────────────────────────┤
│ [📷] ポロシャツ M    在庫: 3  [詳細]   │
│      MLS-101                           │
├────────────────────────────────────────┤
│ [📷] Tシャツ S       在庫: 4  [詳細]   │
│      MCT-202                           │
└────────────────────────────────────────┘
```

---

## 🎨 ステップ7: 画像を変更する

### 7.1 既存の画像を変更

1. 商品詳細ページを開く
2. **「画像を変更」** ボタンをクリック
3. 新しい画像ファイルを選択
4. アップロードが完了すると、画像が新しいものに変わります

**注意**: 古い画像は自動的に削除されます

---

## ⚠️ トラブルシューティング

### エラー1: 「ファイルサイズが大きすぎます」

**原因**: 画像ファイルが5MBを超えている

**解決方法**:
1. 画像編集ソフト（ペイント、Photoshopなど）で画像を開く
2. 画像サイズを縮小する（例: 800x800ピクセル）
3. 品質を下げて保存する
4. 再度アップロードを試す

**または**:
- オンライン画像圧縮サービスを使う
  - [TinyPNG](https://tinypng.com/)
  - [Squoosh](https://squoosh.app/)

### エラー2: 「対応していない画像形式です」

**原因**: JPEG、PNG、WebP以外の形式

**解決方法**:
1. 画像編集ソフトで画像を開く
2. **「名前を付けて保存」** を選択
3. 形式を **JPEG** または **PNG** に変更
4. 保存して再度アップロード

### エラー3: 「画像のアップロードに失敗しました」

**原因**: ネットワークエラーまたはサーバーエラー

**解決方法**:
1. インターネット接続を確認
2. ページをリロード（F5キー）
3. 再度ログイン
4. もう一度アップロードを試す

**それでも解決しない場合**:
1. ブラウザの開発者ツールを開く（F12キー）
2. **Console** タブを確認
3. エラーメッセージをコピー
4. 管理者に報告

### エラー4: 画像が表示されない

**原因**: キャッシュの問題

**解決方法**:
1. ページをリロード（F5キー）
2. スーパーリロード（Ctrl + Shift + R）
3. ブラウザのキャッシュをクリア

---

## 📊 テスト結果チェックリスト

以下の項目を確認して、すべてにチェックが入れば成功です！

### 基本機能
- [ ] 画像をアップロードできる
- [ ] アップロード中の表示が出る
- [ ] アップロード完了メッセージが表示される
- [ ] 商品詳細ページで画像が表示される

### 一覧表示
- [ ] 商品一覧でサムネイルが表示される
- [ ] サムネイル画像が鮮明である
- [ ] 複数の商品に画像をアップロードできる

### 削除機能
- [ ] 画像を削除できる
- [ ] 削除後、元の状態に戻る
- [ ] 削除完了メッセージが表示される

### 変更機能
- [ ] 既存の画像を変更できる
- [ ] 変更後、新しい画像が表示される

### エラーハンドリング
- [ ] 大きすぎるファイルはエラーになる
- [ ] 対応していない形式はエラーになる
- [ ] エラーメッセージがわかりやすい

---

## 🎓 理解度チェック

### Q1: どの形式の画像ファイルがアップロードできますか？

<details>
<summary>答えを見る</summary>

**答え**: JPEG（.jpg）、PNG（.png）、WebP（.webp）

GIF、BMP、TIFF などは対応していません。
</details>

### Q2: アップロードできる画像の最大サイズは？

<details>
<summary>答えを見る</summary>

**答え**: 5MB（メガバイト）

5MBを超える画像は、圧縮または縮小する必要があります。
</details>

### Q3: 画像をアップロードすると、どこに保存されますか？

<details>
<summary>答えを見る</summary>

**答え**: Supabase Storage（クラウドストレージ）

ローカルのコンピュータではなく、インターネット上のストレージに保存されます。
</details>

### Q4: 1つの商品に複数の画像をアップロードできますか？

<details>
<summary>答えを見る</summary>

**答え**: 現在は1つの商品につき1枚の画像のみ

複数画像対応は、今後の拡張機能として予定されています。
</details>

---

## 🎉 次のステップ

画像アップロード機能のテストが完了したら、次は：

1. **リアルタイム機能のテスト**
   - 複数のブラウザで同時に開く
   - 一方で在庫を変更し、他方で自動更新されることを確認

2. **PWA機能のテスト**
   - アプリをインストールする
   - オフライン機能を試す

3. **注文機能のテスト**
   - 新規注文を作成する
   - 画像付きの商品がカートに表示されることを確認

---

## 📞 サポート

わからないことがあれば、以下の方法でサポートを受けられます：

- 📧 メール: saablow@yahoo.co.jp
- 📚 ドキュメント: `docs/COMPLETE-SETUP-GUIDE.md`
- 🐛 問題報告: GitHub Issues

---

**作成日**: 2026年2月10日  
**対象**: 初学者向け  
**所要時間**: 約15分
