# åœ¨åº«æ³¨æ–‡ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  è¦ä»¶å®šç¾©æ›¸

## ç›®æ¬¡
1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#1-ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
2. [æ©Ÿèƒ½è¦ä»¶](#2-æ©Ÿèƒ½è¦ä»¶)
3. [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ](#3-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ)
4. [æŠ€è¡“è¦ä»¶](#4-æŠ€è¡“è¦ä»¶)
5. [ç”»é¢è¨­è¨ˆ](#5-ç”»é¢è¨­è¨ˆ)
6. [é–‹ç™ºã‚¹ãƒ†ãƒƒãƒ—](#6-é–‹ç™ºã‚¹ãƒ†ãƒƒãƒ—)

---

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### 1.1 ç›®çš„
- å•†å“ã®åœ¨åº«ç®¡ç†ã€å£²ä¸Šç®¡ç†ã‚’ä¸€å…ƒåŒ–
- ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³ã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªåœ¨åº«ç®¡ç†ã®å®Ÿç¾
- å£²ä¸Šãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–ã«ã‚ˆã‚‹çµŒå–¶åˆ¤æ–­ã®æ”¯æ´

### 1.2 ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

#### æœ¬ã‚·ã‚¹ãƒ†ãƒ ï¼ˆSupabaseçµ±åˆæ§‹æˆï¼‰
| é …ç›® | å†…å®¹ |
|------|------|
| ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å½¢æ…‹ | PWAï¼ˆProgressive Web Applicationï¼‰ |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | **Supabase PostgreSQL** |
| èªè¨¼æ–¹å¼ | **Supabase Authï¼ˆGoogle Providerï¼‰** |
| ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | **Supabase Storage** |
| ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ | **Supabase Realtime** |
| ãƒ‡ã‚¶ã‚¤ãƒ³ | ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆãƒãƒ«ãƒãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œï¼‰ |
| ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° | Vercel |

#### Supabaseã‚’æ¡ç”¨ã™ã‚‹ç†ç”±
| ç†ç”± | èª¬æ˜ |
|------|------|
| ğŸš€ **é«˜é€Ÿãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹** | PostgreSQLã«ã‚ˆã‚‹é«˜é€Ÿã‚¯ã‚¨ãƒªï¼ˆGoogle Sheetsã®10-100å€ï¼‰ |
| ğŸ”’ **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§** | ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¯¾å¿œã€å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ |
| ğŸ“¦ **çµ±åˆç®¡ç†** | DBãƒ»èªè¨¼ãƒ»ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’1ã¤ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ç®¡ç† |
| ğŸ”„ **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°** | åœ¨åº«ã®å³æ™‚åæ˜ ã€è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼åŒæ™‚ç·¨é›†å¯¾å¿œ |
| ğŸ’° **ã‚³ã‚¹ãƒˆåŠ¹ç‡** | Freeãƒ—ãƒ©ãƒ³ï¼ˆDB 500MB + Storage 1GBï¼‰ã§ååˆ† |
| ğŸ› ï¸ **é–‹ç™ºåŠ¹ç‡** | APIè‡ªå‹•ç”Ÿæˆã€TypeScriptå‹å®šç¾©è‡ªå‹•ç”Ÿæˆ |

> ğŸ“˜ **è©³ç´°**: [Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](./setup-supabase.md) ã‚’å‚ç…§

### 1.3 å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¨®åˆ¥ | æ¨©é™ |
|-------------|------|
| ç®¡ç†è€… | å…¨æ©Ÿèƒ½ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† |
| ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ | åœ¨åº«ç®¡ç†ã€å£²ä¸Šç®¡ç†æ©Ÿèƒ½ã®åˆ©ç”¨ |

---

## 2. æ©Ÿèƒ½è¦ä»¶

### 2.1 èªè¨¼ãƒ»èªå¯æ©Ÿèƒ½

#### 2.1.1 ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½
- Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ã‚ˆã‚‹ã‚·ãƒ³ã‚°ãƒ«ã‚µã‚¤ãƒ³ã‚ªãƒ³ï¼ˆSSOï¼‰
- ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®ä¿æŒï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ï¼‰
- ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½

#### 2.1.2 æ¨©é™ç®¡ç†
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ã®è¨­å®šï¼ˆç®¡ç†è€…/ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
- æ¨©é™ã«å¿œã˜ãŸæ©Ÿèƒ½åˆ¶é™

---

### 2.2 åœ¨åº«ç®¡ç†æ©Ÿèƒ½ï¼ˆSKUç®¡ç†ï¼‰

#### 2.2.1 å•†å“ä¸€è¦§è¡¨ç¤º
- **å…¥ã‚Œå­æ§‹é€ è¡¨ç¤º**: åŒä¸€ã€Œå•†å“ã‚³ãƒ¼ãƒ‰ã€ã‚’æŒã¤å•†å“ã¯è¦ªå­æ§‹é€ ã§è¡¨ç¤º
  ```
  ãƒãƒ­ã‚·ãƒ£ãƒ„ (MLS-101)          [åˆè¨ˆåœ¨åº«: 5]
  â”œâ”€ ãƒãƒ­ã‚·ãƒ£ãƒ„ S (JAN: 4595643591894)  åœ¨åº«: 2
  â””â”€ ãƒãƒ­ã‚·ãƒ£ãƒ„ M (JAN: 4595643591900)  åœ¨åº«: 3

  ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«Tã‚·ãƒ£ãƒ„ (MCT-202)   [åˆè¨ˆåœ¨åº«: 9]
  â”œâ”€ ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«Tã‚·ãƒ£ãƒ„ S (JAN: 4595643591917)  åœ¨åº«: 4
  â””â”€ ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«Tã‚·ãƒ£ãƒ„ M (JAN: 4595643591924)  åœ¨åº«: 5

  ãƒ‡ãƒ‹ãƒ ã‚¸ãƒ£ã‚±ãƒƒãƒˆ (MDJ-303)    [åˆè¨ˆåœ¨åº«: 11]
  â”œâ”€ ãƒ‡ãƒ‹ãƒ ã‚¸ãƒ£ã‚±ãƒƒãƒˆ S (JAN: 4595643591931)  åœ¨åº«: 6
  â””â”€ ãƒ‡ãƒ‹ãƒ ã‚¸ãƒ£ã‚±ãƒƒãƒˆ M (JAN: 4595643591948)  åœ¨åº«: 5
  ```
- **å•†å“ç”»åƒã®ã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤º**: å„å•†å“ã«ç”»åƒãŒã‚ã‚‹å ´åˆã¯ä¸€è¦§ã«ã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤º
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ
- ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆå•†å“åã€åœ¨åº«æ•°ã€æ›´æ–°æ—¥æ™‚ï¼‰

#### 2.2.2 å•†å“æ¤œç´¢æ©Ÿèƒ½
| æ¤œç´¢é …ç›® | èª¬æ˜ |
|----------|------|
| å•†å“å | éƒ¨åˆ†ä¸€è‡´æ¤œç´¢ |
| å•†å“ã‚³ãƒ¼ãƒ‰ | å®Œå…¨ä¸€è‡´/éƒ¨åˆ†ä¸€è‡´æ¤œç´¢ |
| JANã‚³ãƒ¼ãƒ‰ | å®Œå…¨ä¸€è‡´æ¤œç´¢ |

#### 2.2.3 åœ¨åº«æ•°é‡æ›´æ–°
- æ‰‹å‹•ã§ã®åœ¨åº«æ•°é‡å¤‰æ›´
- å¤‰æ›´å±¥æ­´ã®è¨˜éŒ²
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸åæ˜ **

#### 2.2.4 ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³ï¼ˆåœ¨åº«è¿½åŠ ï¼‰
- ã‚«ãƒ¡ãƒ©ã‚’ä½¿ç”¨ã—ãŸJANã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³
- ã‚¹ã‚­ãƒ£ãƒ³å¾Œã€è©²å½“å•†å“ã®åœ¨åº«æ•°é‡ã‚’+1
- **ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸ã®è‡ªå‹•åæ˜ **

#### 2.2.5 å•†å“ç”»åƒç®¡ç†æ©Ÿèƒ½
| æ©Ÿèƒ½ | èª¬æ˜ |
|------|------|
| ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ | å•†å“è©³ç´°ç”»é¢ã‹ã‚‰ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ |
| ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ | ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‰ã®ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º |
| ç”»åƒå‰Šé™¤ | ç™»éŒ²æ¸ˆã¿ç”»åƒã®å‰Šé™¤ |
| ç”»åƒURLç™»éŒ² | å¤–éƒ¨URLã‹ã‚‰ã®ç”»åƒç™»éŒ²ï¼ˆCSVçµŒç”±ã‚‚å¯ï¼‰ |
| ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆ | ä¸€è¦§è¡¨ç¤ºç”¨ã®ã‚µãƒ ãƒã‚¤ãƒ«è‡ªå‹•ç”Ÿæˆ |

**ç”»åƒç®¡ç†ä»•æ§˜**:
- **ä¿å­˜æ–¹å¼**: 
  - æ–¹å¼1: å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆVercel Blob Storage / Cloudinary / Google Cloud Storageï¼‰
  - æ–¹å¼2: Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ç›´æ¥ä¿å­˜ï¼ˆå°å®¹é‡ã®ã¿æ¨å¥¨ï¼‰
  - æ–¹å¼3: å¤–éƒ¨URLå‚ç…§ï¼ˆæ—¢å­˜ã®ç”»åƒURLã‚’ç™»éŒ²ï¼‰
- **å¯¾å¿œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: JPEG, PNG, WebP
- **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™**: æœ€å¤§5MB
- **ç”»åƒã‚µã‚¤ã‚º**: 
  - ã‚ªãƒªã‚¸ãƒŠãƒ«: æœ€å¤§1200x1200px
  - ã‚µãƒ ãƒã‚¤ãƒ«: 200x200pxï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: 
  - ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­ã®æ¤œè¨¼
  - MIMEã‚¿ã‚¤ãƒ—ã®æ¤œè¨¼
  - ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã®æ¤œè¨¼

**ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ãƒ­ãƒ¼**:
1. å•†å“è©³ç´°ç”»é¢ã§ã€Œç”»åƒã‚’è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã¾ãŸã¯ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—
3. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
4. ã€Œä¿å­˜ã€ãƒœã‚¿ãƒ³ã§ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
5. ç”»åƒURLã‚’ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ä¿å­˜
6. ä¸€è¦§ç”»é¢ã«åæ˜ 

#### 2.2.6 CSVå…¥å‡ºåŠ›æ©Ÿèƒ½
| æ©Ÿèƒ½ | èª¬æ˜ |
|------|------|
| CSVãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ | å•†å“æƒ…å ±å…¥åŠ›ç”¨ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å–å¾— |
| CSVã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ | å•†å“æƒ…å ±ã®ä¸€æ‹¬æ›´æ–° |
| ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆåŒæœŸ | ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¾Œã€è‡ªå‹•ã§ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆæ›´æ–° |

**CSVãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä»•æ§˜ï¼ˆå•†å“æƒ…å ±ï¼‰**:
```csv
å•†å“ID,å•†å“å,ç”»åƒURL,ã‚µã‚¤ã‚º,å•†å“ã‚³ãƒ¼ãƒ‰,JANã‚³ãƒ¼ãƒ‰,ç¨æŠœä¾¡æ ¼,ç¨è¾¼ä¾¡æ ¼
1,ãƒãƒ­ã‚·ãƒ£ãƒ„,,S,MLS-101,4595643591894,3500,3850
2,ãƒãƒ­ã‚·ãƒ£ãƒ„,,M,MLS-101,4595643591900,3500,3850
```

| ã‚«ãƒ©ãƒ  | å¿…é ˆ | èª¬æ˜ |
|--------|------|------|
| å•†å“ID | â—‹ | æ—¢å­˜å•†å“ã®æ›´æ–°æ™‚ã¯å¿…é ˆã€æ–°è¦è¿½åŠ æ™‚ã¯ç©ºæ¬„ |
| å•†å“å | â—‹ | å•†å“åç§° |
| ç”»åƒURL | - | å•†å“ç”»åƒURLï¼ˆä»»æ„ï¼‰ |
| ã‚µã‚¤ã‚º | â—‹ | S, M, L ãªã© |
| å•†å“ã‚³ãƒ¼ãƒ‰ | â—‹ | SKUã‚³ãƒ¼ãƒ‰ï¼ˆåŒä¸€å•†å“ã¯ã‚³ãƒ¼ãƒ‰ã‚’æƒãˆã‚‹ï¼‰ |
| JANã‚³ãƒ¼ãƒ‰ | â—‹ | 13æ¡ã®JANã‚³ãƒ¼ãƒ‰ |
| ç¨æŠœä¾¡æ ¼ | â—‹ | æ•°å€¤ï¼ˆå††ï¼‰ |
| ç¨è¾¼ä¾¡æ ¼ | â—‹ | æ•°å€¤ï¼ˆå††ï¼‰ |

**CSVå‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
2. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå¿…é ˆé …ç›®ã€ãƒ‡ãƒ¼ã‚¿å‹ã€JANã‚³ãƒ¼ãƒ‰æ¡æ•°ï¼‰
3. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºï¼ˆè¿½åŠ /æ›´æ–°ä»¶æ•°ã®ç¢ºèªï¼‰
4. ç¢ºå®šãƒœã‚¿ãƒ³ã§ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸åæ˜ 
5. åœ¨åº«æƒ…å ±ã‚·ãƒ¼ãƒˆã¸ã®åˆæœŸåœ¨åº«è¿½åŠ ï¼ˆæ–°è¦å•†å“ã®å ´åˆï¼‰

---

### 2.3 å£²ä¸Šç®¡ç†æ©Ÿèƒ½ï¼ˆå—æ³¨ç®¡ç†ï¼‰

#### 2.3.1 æ³¨æ–‡ä¸€è¦§è¡¨ç¤º
- å…¨æ³¨æ–‡ã®ä¸€è¦§è¡¨ç¤º
- æ³¨æ–‡ç•ªå·ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°è¡¨ç¤º
- æ³¨æ–‡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º

#### 2.3.2 æ³¨æ–‡è©³ç´°è¡¨ç¤º
- æ³¨æ–‡ç•ªå·ã€æ³¨æ–‡æ—¥æ™‚
- æ³¨æ–‡å•†å“ä¸€è¦§
- **ç¨è¾¼é‡‘é¡ãƒ»ç¨æŠœé‡‘é¡ã®ä¸¡æ–¹è¡¨ç¤º**
- åˆè¨ˆé‡‘é¡è¡¨ç¤º

#### 2.3.3 æ–°è¦æ³¨æ–‡ä½œæˆ
| ã‚¹ãƒ†ãƒƒãƒ— | æ“ä½œå†…å®¹ |
|----------|----------|
| 1 | æ–°è¦æ³¨æ–‡ã‚’é–‹å§‹ |
| 2 | ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ |
| 3 | ã‚«ãƒ¡ãƒ©ã§ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒ£ãƒ³ |
| 4 | å•†å“ãŒæ³¨æ–‡ã«è¿½åŠ ã•ã‚Œã‚‹ |
| 5 | æ•°é‡ã‚’ã€Œ+ã€ã€Œ-ã€ãƒœã‚¿ãƒ³ã§èª¿æ•´ |
| 6 | åˆè¨ˆé‡‘é¡ã‚’ç¢ºèª |
| 7 | ã€Œæ³¨æ–‡ç¢ºèªã€ãƒœã‚¿ãƒ³ã§ç¢ºå®š |

#### 2.3.4 æ•°é‡èª¿æ•´æ©Ÿèƒ½
- ã€Œ+ã€ãƒœã‚¿ãƒ³: æ•°é‡ã‚’1å¢—åŠ 
- ã€Œ-ã€ãƒœã‚¿ãƒ³: æ•°é‡ã‚’1æ¸›å°‘ï¼ˆæœ€å°å€¤: 1ï¼‰
- å•†å“å‰Šé™¤æ©Ÿèƒ½

#### 2.3.5 æ³¨æ–‡ç¢ºå®šå‡¦ç†
- æ³¨æ–‡ç¢ºå®šæ™‚ã€æ³¨æ–‡ä¸€è¦§ã«åæ˜ 
- **ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸æ³¨æ–‡æƒ…å ±ã‚’è¿½åŠ **
- åœ¨åº«æ•°é‡ã®è‡ªå‹•æ¸›ç®—

---

### 2.4 ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ©Ÿèƒ½

#### 2.4.1 å£²ä¸Šæ¨ç§»ã‚°ãƒ©ãƒ•
- æ—¥åˆ¥/é€±åˆ¥/æœˆåˆ¥ã®å£²ä¸Šæ¨ç§»
- æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã¾ãŸã¯æ£’ã‚°ãƒ©ãƒ•è¡¨ç¤º
- æœŸé–“é¸æŠæ©Ÿèƒ½

#### 2.4.2 æ³¨æ–‡æ•°è¡¨ç¤º
- æœ¬æ—¥ã®æ³¨æ–‡æ•°
- ä»Šé€±/ä»Šæœˆã®æ³¨æ–‡æ•°
- å‰æœŸæ¯”è¼ƒ

#### 2.4.3 åœ¨åº«æƒ…å ±ã‚µãƒãƒªãƒ¼
- ç·å•†å“æ•°
- åœ¨åº«åˆ‡ã‚Œå•†å“æ•°
- åœ¨åº«å°‘å•†å“ã®ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º

#### 2.4.4 å•†å“åˆ¥å£²ä¸Šåˆ†æ
- å£²ä¸Šä¸Šä½å•†å“ãƒ©ãƒ³ã‚­ãƒ³ã‚°
- ã‚«ãƒ†ã‚´ãƒªåˆ¥å£²ä¸Šæ¯”ç‡

---

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 3.1 ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹

#### Supabase PostgreSQL
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Supabase PostgreSQL
- **ãƒ†ãƒ¼ãƒ–ãƒ«æ•°**: 5ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆproducts, stock, orders, order_details, usersï¼‰
- **ä¸»è¦æ©Ÿèƒ½**: 
  - âœ… ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å¯¾å¿œï¼ˆACIDä¿è¨¼ï¼‰
  - âœ… å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ï¼ˆå‚ç…§æ•´åˆæ€§ï¼‰
  - âœ… Row Level Securityï¼ˆè¡Œãƒ¬ãƒ™ãƒ«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼‰
  - âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸï¼ˆSupabase Realtimeï¼‰
  - âœ… è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆãƒã‚¤ãƒ³ãƒˆã‚¤ãƒ³ã‚¿ã‚¤ãƒ ãƒªã‚«ãƒãƒªï¼‰
  - âœ… å…¨æ–‡æ¤œç´¢ï¼ˆPostgreSQL FTSï¼‰
  - âœ… ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–

#### åˆæœŸãƒ‡ãƒ¼ã‚¿ç§»è¡Œ
- **ç§»è¡Œå…ƒ**: `db/template_DB.xlsx`ï¼ˆ30å•†å“ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼‰
- **ç§»è¡Œæ–¹æ³•**: ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆ`scripts/migrate-to-supabase.ts`ï¼‰
- **ç§»è¡Œå†…å®¹**: 
  - å•†å“ãƒ‡ãƒ¼ã‚¿ï¼ˆ30ä»¶ï¼‰
  - åœ¨åº«ãƒ‡ãƒ¼ã‚¿ï¼ˆ30ä»¶ï¼‰
  - æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ï¼ˆ5ä»¶ï¼‰
  - æ³¨æ–‡è©³ç´°ãƒ‡ãƒ¼ã‚¿ï¼ˆ40ä»¶ï¼‰

> ğŸ“˜ **ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †**: [Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](./setup-supabase.md) ã‚’å‚ç…§

### 3.2 ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆï¼ˆSupabase PostgreSQLï¼‰

> â€» ä»¥ä¸‹ã¯ Supabase PostgreSQL ã®ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ã§ã™

#### 3.2.1 products ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆå•†å“ï¼‰
| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ | ä¾‹ |
|----------|----------|------|------|-----|
| id | BIGSERIAL | PRIMARY KEY | å•†å“IDï¼ˆè‡ªå‹•æ¡ç•ªï¼‰ | 1, 2, 3... |
| name | VARCHAR(255) | NOT NULL | å•†å“åç§° | ãƒãƒ­ã‚·ãƒ£ãƒ„, ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«Tã‚·ãƒ£ãƒ„ |
| image_url | TEXT | NULL | å•†å“ç”»åƒã®URLï¼ˆSupabase Storageï¼‰ | https://...supabase.co/storage/... |
| size | VARCHAR(50) | NOT NULL | ã‚µã‚¤ã‚º | S, M, L |
| product_code | VARCHAR(100) | NOT NULL, INDEX | SKUå•†å“ã‚³ãƒ¼ãƒ‰ | MLS-101, MCT-202 |
| jan_code | VARCHAR(13) | UNIQUE, NOT NULL, INDEX | JANã‚³ãƒ¼ãƒ‰ï¼ˆ13æ¡ï¼‰ | 4595643591894 |
| price_excluding_tax | INTEGER | NOT NULL, CHECK >= 0 | ç¨æŠœä¾¡æ ¼ï¼ˆå††ï¼‰ | 3500 |
| price_including_tax | INTEGER | NOT NULL, CHECK >= 0 | ç¨è¾¼ä¾¡æ ¼ï¼ˆå††ï¼‰ | 3850 |
| created_at | TIMESTAMPTZ | DEFAULT NOW() | ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆæ—¥æ™‚ | 2024-03-20T06:47:44Z |
| updated_at | TIMESTAMPTZ | DEFAULT NOW() | ãƒ¬ã‚³ãƒ¼ãƒ‰æ›´æ–°æ—¥æ™‚ï¼ˆè‡ªå‹•æ›´æ–°ï¼‰ | 2024-06-11T11:51:48Z |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `idx_products_product_code`: product_codeï¼ˆé«˜é€Ÿæ¤œç´¢ï¼‰
- `idx_products_jan_code`: jan_codeï¼ˆãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³é«˜é€ŸåŒ–ï¼‰
- `idx_products_name`: nameï¼ˆå…¨æ–‡æ¤œç´¢ç”¨GINã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼‰

**ãƒˆãƒªã‚¬ãƒ¼:**
- `update_products_updated_at`: æ›´æ–°æ™‚ã« updated_at ã‚’è‡ªå‹•æ›´æ–°

**ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆ30ä»¶ï¼‰**:
| å•†å“ID | å•†å“å | ã‚µã‚¤ã‚º | å•†å“ã‚³ãƒ¼ãƒ‰ | JANã‚³ãƒ¼ãƒ‰ | ç¨æŠœä¾¡æ ¼ | ç¨è¾¼ä¾¡æ ¼ |
|--------|--------|--------|------------|-----------|----------|----------|
| 1 | ãƒãƒ­ã‚·ãƒ£ãƒ„ | S | MLS-101 | 4595643591894 | 3,500 | 3,850 |
| 2 | ãƒãƒ­ã‚·ãƒ£ãƒ„ | M | MLS-101 | 4595643591900 | 3,500 | 3,850 |
| 3 | ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«Tã‚·ãƒ£ãƒ„ | S | MCT-202 | 4595643591917 | 2,800 | 3,080 |
| 4 | ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«Tã‚·ãƒ£ãƒ„ | M | MCT-202 | 4595643591924 | 2,800 | 3,080 |
| 5 | ãƒ‡ãƒ‹ãƒ ã‚¸ãƒ£ã‚±ãƒƒãƒˆ | S | MDJ-303 | 4595643591931 | 8,200 | 9,020 |
| ... | ... | ... | ... | ... | ... | ... |

**SKUã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«**:
- åŒä¸€ã®ã€Œå•†å“ã‚³ãƒ¼ãƒ‰ã€ã‚’æŒã¤å•†å“ã¯åŒä¸€å•†å“ã®è‰²ãƒ»ã‚µã‚¤ã‚ºé•ã„ã¨ã—ã¦æ‰±ã†
- ä¾‹: MLS-101 â†’ ãƒãƒ­ã‚·ãƒ£ãƒ„ï¼ˆSï¼‰, ãƒãƒ­ã‚·ãƒ£ãƒ„ï¼ˆMï¼‰

---

#### 3.2.2 stock ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆåœ¨åº«æƒ…å ±ï¼‰
| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ | ä¾‹ |
|----------|----------|------|------|-----|
| id | BIGSERIAL | PRIMARY KEY | åœ¨åº«IDï¼ˆè‡ªå‹•æ¡ç•ªï¼‰ | 1, 2, 3... |
| product_id | BIGINT | NOT NULL, UNIQUE, FKâ†’products(id) ON DELETE CASCADE | å•†å“ID | 1, 2, 3... |
| quantity | INTEGER | NOT NULL, DEFAULT 0, CHECK >= 0 | ç¾åœ¨ã®åœ¨åº«æ•°é‡ | 2, 3, 4... |
| last_stocked_date | DATE | NULL | æœ€å¾Œã«å…¥åº«ã—ãŸæ—¥ä»˜ | 2024-08-13 |
| created_at | TIMESTAMPTZ | DEFAULT NOW() | ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆæ—¥æ™‚ | 2024-04-15T06:41:00Z |
| updated_at | TIMESTAMPTZ | DEFAULT NOW() | ãƒ¬ã‚³ãƒ¼ãƒ‰æ›´æ–°æ—¥æ™‚ï¼ˆè‡ªå‹•æ›´æ–°ï¼‰ | 2024-06-11T21:44:00Z |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `idx_stock_product_id`: product_idï¼ˆé«˜é€Ÿæ¤œç´¢ï¼‰
- `idx_stock_quantity`: quantityï¼ˆåœ¨åº«åˆ‡ã‚Œæ¤œç´¢é«˜é€ŸåŒ–ï¼‰

**å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„:**
- `product_id` â†’ `products(id)`: å•†å“å‰Šé™¤æ™‚ã«åœ¨åº«ã‚‚è‡ªå‹•å‰Šé™¤ï¼ˆCASCADEï¼‰

**ãƒˆãƒªã‚¬ãƒ¼:**
- `update_stock_updated_at`: æ›´æ–°æ™‚ã« updated_at ã‚’è‡ªå‹•æ›´æ–°

**ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆ30ä»¶ï¼‰**:
| åœ¨åº«ID | å•†å“ID | åœ¨åº«æ•° | æœ€çµ‚å…¥åº«æ—¥ |
|--------|--------|--------|------------|
| 1 | 1 | 2 | 2024/08/13 |
| 2 | 2 | 3 | 2024/08/13 |
| 3 | 3 | 4 | 2024/08/13 |
| ... | ... | ... | ... |

---

#### 3.2.3 orders ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ³¨æ–‡æƒ…å ±ï¼‰
| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ | ä¾‹ |
|----------|----------|------|------|-----|
| id | BIGSERIAL | PRIMARY KEY | æ³¨æ–‡IDï¼ˆè‡ªå‹•æ¡ç•ªï¼‰ | 1001, 1002... |
| item_count | INTEGER | NOT NULL, CHECK > 0 | æ³¨æ–‡ã«å«ã¾ã‚Œã‚‹å•†å“ç‚¹æ•° | 8 |
| total_price_excluding_tax | INTEGER | NOT NULL, CHECK >= 0 | åˆè¨ˆé‡‘é¡ï¼ˆç¨æŠœï¼‰ | 25200 |
| total_price_including_tax | INTEGER | NOT NULL, CHECK >= 0 | åˆè¨ˆé‡‘é¡ï¼ˆç¨è¾¼ï¼‰ | 27720 |
| order_date | TIMESTAMPTZ | DEFAULT NOW() | æ³¨æ–‡æ—¥æ™‚ | 2024-04-15T06:41:00Z |
| created_at | TIMESTAMPTZ | DEFAULT NOW() | ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆæ—¥æ™‚ | 2024-04-15T06:41:00Z |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `idx_orders_order_date`: order_date DESCï¼ˆæœ€æ–°æ³¨æ–‡ã®é«˜é€Ÿå–å¾—ï¼‰

**ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯:**
- æ³¨æ–‡ä½œæˆæ™‚ã«ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã§åœ¨åº«ã‚’æ¸›ç®—
- åœ¨åº«ä¸è¶³ã®å ´åˆã¯ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯

**ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆ5ä»¶ï¼‰**:
| æ³¨æ–‡ID | å•†å“æ•° | æ³¨æ–‡é‡‘é¡(ç¨æŠœ) | æ³¨æ–‡é‡‘é¡(ç¨è¾¼) | æ³¨æ–‡æ—¥ |
|--------|--------|----------------|----------------|--------|
| 1001 | 8 | Â¥25,200 | Â¥27,720 | 2024/04/15 |
| 1002 | 8 | Â¥92,800 | Â¥102,080 | 2024/04/16 |
| 1003 | 8 | Â¥36,000 | Â¥39,600 | 2024/04/17 |
| 1004 | 8 | Â¥46,000 | Â¥50,600 | 2024/04/18 |
| 1005 | 8 | Â¥34,000 | Â¥37,400 | 2024/04/19 |

---

#### 3.2.4 order_details ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ³¨æ–‡è©³ç´°ï¼‰
| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ | ä¾‹ |
|----------|----------|------|------|-----|
| id | BIGSERIAL | PRIMARY KEY | æ˜ç´°IDï¼ˆè‡ªå‹•æ¡ç•ªï¼‰ | 1001, 1002... |
| order_id | BIGINT | NOT NULL, FKâ†’orders(id) ON DELETE CASCADE | æ³¨æ–‡ID | 1001 |
| product_id | BIGINT | NOT NULL, FKâ†’products(id) ON DELETE RESTRICT | å•†å“ID | 1, 2, 3... |
| quantity | INTEGER | NOT NULL, CHECK > 0 | æ³¨æ–‡æ•°é‡ | 2 |
| unit_price_excluding_tax | INTEGER | NOT NULL, CHECK >= 0 | å•†å“å˜ä¾¡ï¼ˆç¨æŠœï¼‰ | 3500 |
| unit_price_including_tax | INTEGER | NOT NULL, CHECK >= 0 | å•†å“å˜ä¾¡ï¼ˆç¨è¾¼ï¼‰ | 3850 |
| subtotal_excluding_tax | INTEGER | NOT NULL, CHECK >= 0 | å°è¨ˆé‡‘é¡ï¼ˆç¨æŠœï¼‰ | 7000 |
| subtotal_including_tax | INTEGER | NOT NULL, CHECK >= 0 | å°è¨ˆé‡‘é¡ï¼ˆç¨è¾¼ï¼‰ | 7700 |
| created_at | TIMESTAMPTZ | DEFAULT NOW() | ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆæ—¥æ™‚ | 2024-04-15T06:41:00Z |
| updated_at | TIMESTAMPTZ | DEFAULT NOW() | ãƒ¬ã‚³ãƒ¼ãƒ‰æ›´æ–°æ—¥æ™‚ï¼ˆè‡ªå‹•æ›´æ–°ï¼‰ | 2024-04-15T06:41:00Z |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `idx_order_details_order_id`: order_idï¼ˆæ³¨æ–‡è©³ç´°ã®é«˜é€Ÿå–å¾—ï¼‰
- `idx_order_details_product_id`: product_idï¼ˆå•†å“åˆ¥å£²ä¸Šåˆ†æï¼‰

**å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„:**
- `order_id` â†’ `orders(id)`: æ³¨æ–‡å‰Šé™¤æ™‚ã«è©³ç´°ã‚‚è‡ªå‹•å‰Šé™¤ï¼ˆCASCADEï¼‰
- `product_id` â†’ `products(id)`: å•†å“å‰Šé™¤ã‚’åˆ¶é™ï¼ˆRESTRICTï¼‰

**ãƒˆãƒªã‚¬ãƒ¼:**
- `update_order_details_updated_at`: æ›´æ–°æ™‚ã« updated_at ã‚’è‡ªå‹•æ›´æ–°

**ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿**:
| æ˜ç´°ID | æ³¨æ–‡ID | å•†å“ID | æ•°é‡ | å˜ä¾¡(ç¨æŠœ) | å˜ä¾¡(ç¨è¾¼) | å°è¨ˆ(ç¨æŠœ) | å°è¨ˆ(ç¨è¾¼) |
|--------|--------|--------|------|------------|------------|------------|------------|
| 1001 | 1001 | 1 | 2 | 3,500 | 3,850 | 7,000 | 7,700 |
| 1002 | 1001 | 2 | 2 | 3,500 | 3,850 | 7,000 | 7,700 |
| 1003 | 1001 | 3 | 2 | 2,800 | 3,080 | 5,600 | 6,160 |
| ... | ... | ... | ... | ... | ... | ... | ... |

---

### 3.3 ERå›³ï¼ˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é–¢é€£å›³ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    å•†å“     â”‚       â”‚  åœ¨åº«æƒ…å ±   â”‚       â”‚ ãƒ¦ãƒ¼ã‚¶ãƒã‚¹ã‚¿â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å•†å“ID (PK) â”‚â—„â”€â”€â”€â”€â”€â”€â”‚ å•†å“ID (FK) â”‚       â”‚ idno (PK)   â”‚
â”‚ å•†å“å      â”‚   1:1 â”‚ åœ¨åº«ID (PK) â”‚       â”‚ user_id     â”‚
â”‚ å•†å“ã‚³ãƒ¼ãƒ‰  â”‚       â”‚ åœ¨åº«æ•°      â”‚       â”‚ email       â”‚
â”‚ JANã‚³ãƒ¼ãƒ‰   â”‚       â”‚ æœ€çµ‚å…¥åº«æ—¥  â”‚       â”‚ name        â”‚
â”‚ ã‚µã‚¤ã‚º      â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚ role        â”‚
â”‚ ç¨æŠœä¾¡æ ¼    â”‚                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ ç¨è¾¼ä¾¡æ ¼    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1:N
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ³¨æ–‡è©³ç´°   â”‚       â”‚  æ³¨æ–‡æƒ…å ±   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ˜ç´°ID (PK) â”‚       â”‚ æ³¨æ–‡ID (PK) â”‚
â”‚ æ³¨æ–‡ID (FK) â”‚â”€â”€â”€â”€â”€â”€â”€â”‚ å•†å“æ•°      â”‚
â”‚ å•†å“ID (FK) â”‚  N:1  â”‚ æ³¨æ–‡é‡‘é¡    â”‚
â”‚ æ•°é‡        â”‚       â”‚ æ³¨æ–‡æ—¥      â”‚
â”‚ å˜ä¾¡        â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ å°è¨ˆ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.5 users ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ | ä¾‹ |
|----------|----------|------|------|-----|
| id | UUID | PRIMARY KEY, FKâ†’auth.users(id) ON DELETE CASCADE | ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆSupabase Authï¼‰ | 550e8400-e29b-41d4-a716-... |
| email | VARCHAR(255) | UNIQUE, NOT NULL | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ | saablow@yahoo.co.jp |
| name | VARCHAR(255) | NULL | ãƒ¦ãƒ¼ã‚¶ãƒ¼å | NANGOU |
| role | VARCHAR(50) | DEFAULT 'user', CHECK IN ('admin', 'user') | æ¨©é™ | admin, user |
| created_at | TIMESTAMPTZ | DEFAULT NOW() | ä½œæˆæ—¥æ™‚ | 2026-02-04T16:48:00Z |
| updated_at | TIMESTAMPTZ | DEFAULT NOW() | æ›´æ–°æ—¥æ™‚ï¼ˆè‡ªå‹•æ›´æ–°ï¼‰ | 2026-02-04T16:48:00Z |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹:**
- `idx_users_email`: emailï¼ˆãƒ­ã‚°ã‚¤ãƒ³é«˜é€ŸåŒ–ï¼‰
- `idx_users_role`: roleï¼ˆæ¨©é™ãƒã‚§ãƒƒã‚¯é«˜é€ŸåŒ–ï¼‰

**å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„:**
- `id` â†’ `auth.users(id)`: Supabase Authã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨é€£æºï¼ˆCASCADEï¼‰

**ãƒˆãƒªã‚¬ãƒ¼:**
- `update_users_updated_at`: æ›´æ–°æ™‚ã« updated_at ã‚’è‡ªå‹•æ›´æ–°
- `on_auth_user_created`: æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ™‚ã«è‡ªå‹•ã§usersãƒ†ãƒ¼ãƒ–ãƒ«ã«è¿½åŠ 

**ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿**:
| idno | user_id | email | name | role |
|------|---------|-------|------|------|
| 1 | saablow@yahoo.co.jp | saablow@yahoo.co.jp | NANGOU | admin |

**æ¨©é™ç¨®åˆ¥**:
| role | èª¬æ˜ |
|------|------|
| admin | ç®¡ç†è€…ï¼šå…¨æ©Ÿèƒ½ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† |
| user | ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼šåœ¨åº«ç®¡ç†ã€å£²ä¸Šç®¡ç†æ©Ÿèƒ½ã®åˆ©ç”¨ |

---

## 4. æŠ€è¡“è¦ä»¶

### 4.1 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
| é …ç›® | æŠ€è¡“/ãƒ„ãƒ¼ãƒ« |
|------|-------------|
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | Next.js 14ï¼ˆApp Routerï¼‰ |
| è¨€èª | TypeScript |
| ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° | Tailwind CSS |
| UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | shadcn/ui |
| ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³ | html5-qrcode / QuaggaJS |
| ã‚°ãƒ©ãƒ•è¡¨ç¤º | Chart.js / Recharts |
| çŠ¶æ…‹ç®¡ç† | React Context / Zustand |
| ç”»åƒå‡¦ç† | next/imageï¼ˆæœ€é©åŒ–ï¼‰ã€react-dropzoneï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰ |

### 4.2 PWAå¯¾å¿œ
| æ©Ÿèƒ½ | èª¬æ˜ |
|------|------|
| Service Worker | ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ |
| Web App Manifest | ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ãªã‚¢ãƒ—ãƒªè¨­å®š |
| Pushé€šçŸ¥ | åœ¨åº«ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ |

### 4.3 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆSupabaseçµ±åˆï¼‰
| é …ç›® | æŠ€è¡“/ãƒ„ãƒ¼ãƒ« |
|------|-------------|
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | Supabase PostgreSQL 15 |
| API | Supabase Auto-generated APIï¼ˆREST & GraphQLï¼‰ |
| èªè¨¼ | Supabase Authï¼ˆGoogle Providerï¼‰ |
| ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | Supabase Storage |
| ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  | Supabase Realtimeï¼ˆWebSocketï¼‰ |
| ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ | @supabase/supabase-js, @supabase/ssr |
| ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ | ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ + BaaS |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ | Row Level Securityï¼ˆRLSï¼‰ |

**Supabase Clientã®ç‰¹å¾´:**
- âœ… TypeScriptå®Œå…¨å¯¾å¿œï¼ˆå‹å®šç¾©è‡ªå‹•ç”Ÿæˆï¼‰
- âœ… CRUDæ“ä½œã®è‡ªå‹•APIç”Ÿæˆ
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³
- âœ… èªè¨¼çŠ¶æ…‹ã®è‡ªå‹•ç®¡ç†
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½

### 4.4 ã‚¤ãƒ³ãƒ•ãƒ©ï¼ˆSupabaseçµ±åˆæ§‹æˆï¼‰
| é …ç›® | ã‚µãƒ¼ãƒ“ã‚¹ | ãƒ—ãƒ©ãƒ³ |
|------|----------|--------|
| ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° | Vercel | Hobbyï¼ˆç„¡æ–™ï¼‰ |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | **Supabase PostgreSQL** | Freeï¼ˆDB 500MBï¼‰ |
| èªè¨¼åŸºç›¤ | **Supabase Auth** | Freeï¼ˆç„¡åˆ¶é™ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ |
| ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | **Supabase Storage** | Freeï¼ˆ1GBï¼‰ |
| ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  | **Supabase Realtime** | Freeï¼ˆåŒæ™‚æ¥ç¶š200ï¼‰ |
| ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— | **Supabaseè‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—** | Freeï¼ˆ7æ—¥é–“ä¿æŒï¼‰ |
| CDN | Supabase CDN | è‡ªå‹• |

**æ–™é‡‘ãƒ—ãƒ©ãƒ³:**
| ãƒ—ãƒ©ãƒ³ | DBå®¹é‡ | Storage | è»¢é€é‡ | æœˆé¡ |
|--------|--------|---------|--------|------|
| Free | 500MB | 1GB | 2GB | **$0** |
| Pro | 8GB | 100GB | 250GB | $25 |

**æƒ³å®šã‚³ã‚¹ãƒˆï¼ˆå•†å“100-200ç‚¹ï¼‰:**
- å•†å“ãƒ‡ãƒ¼ã‚¿: ç´„20MB
- ç”»åƒãƒ‡ãƒ¼ã‚¿: ç´„500MBï¼ˆ100å•†å“Ã—5MBï¼‰
- æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿: ç´„10MB
- **åˆè¨ˆ: ç´„530MB â†’ Freeãƒ—ãƒ©ãƒ³ã§ååˆ†**

**Supabaseçµ±åˆã®ãƒ¡ãƒªãƒƒãƒˆ:**
- âœ… çµ±åˆç®¡ç†ï¼ˆ1ã¤ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§å…¨ã¦ç®¡ç†ï¼‰
- âœ… é«˜é€Ÿãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼ˆPostgreSQLï¼‰
- âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ï¼ˆåœ¨åº«å³æ™‚åæ˜ ï¼‰
- âœ… ã‚³ã‚¹ãƒˆåŠ¹ç‡ï¼ˆFreeãƒ—ãƒ©ãƒ³ã§ååˆ†ï¼‰
- âœ… è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆãƒ‡ãƒ¼ã‚¿ä¿è­·ï¼‰
- âœ… ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ï¼ˆç°¡å˜ã«Proãƒ—ãƒ©ãƒ³ã¸ç§»è¡Œå¯èƒ½ï¼‰

### 4.5 é–‹ç™ºãƒ„ãƒ¼ãƒ«
| é …ç›® | ãƒ„ãƒ¼ãƒ« |
|------|--------|
| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç† | npm / pnpm |
| ã‚³ãƒ¼ãƒ‰å“è³ª | ESLint, Prettier |
| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† | Git |

---

## 5. ç”»é¢è¨­è¨ˆ

### 5.1 ç”»é¢ä¸€è¦§
| No | ç”»é¢å | URL | èª¬æ˜ |
|----|--------|-----|------|
| 1 | ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ | /login | Googleèªè¨¼ç”»é¢ |
| 2 | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | / | ãƒ¡ã‚¤ãƒ³ç”»é¢ã€å£²ä¸Šã‚°ãƒ©ãƒ•ç­‰ |
| 3 | åœ¨åº«ä¸€è¦§ | /inventory | å•†å“ä¸€è¦§ã€æ¤œç´¢ã€ã‚¹ã‚­ãƒ£ãƒ³ã€**ç”»åƒã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤º** |
| 4 | åœ¨åº«è©³ç´° | /inventory/[id] | å•†å“è©³ç´°ã€åœ¨åº«æ›´æ–°ã€**ç”»åƒç®¡ç†** |
| 5 | åœ¨åº«ã‚¹ã‚­ãƒ£ãƒ³ | /inventory/scan | ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³ç”»é¢ |
| 6 | CSVç®¡ç† | /inventory/csv | CSVå…¥å‡ºåŠ›ç”»é¢ |
| 7 | æ³¨æ–‡ä¸€è¦§ | /orders | æ³¨æ–‡ä¸€è¦§è¡¨ç¤º |
| 8 | æ³¨æ–‡è©³ç´° | /orders/[id] | æ³¨æ–‡è©³ç´°è¡¨ç¤ºã€**å•†å“ç”»åƒè¡¨ç¤º** |
| 9 | æ–°è¦æ³¨æ–‡ | /orders/new | æ–°è¦æ³¨æ–‡ä½œæˆã€**å•†å“ç”»åƒè¡¨ç¤º** |
| 10 | è¨­å®š | /settings | ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š |

### 5.2 ç”»é¢é·ç§»å›³
```
[ãƒ­ã‚°ã‚¤ãƒ³] â†’ [ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰]
                â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“          â†“          â†“
[åœ¨åº«ç®¡ç†]  [æ³¨æ–‡ç®¡ç†]  [è¨­å®š]
    â†“          â†“
[ã‚¹ã‚­ãƒ£ãƒ³]  [æ³¨æ–‡è©³ç´°]
[CSVç®¡ç†]   [æ–°è¦æ³¨æ–‡]
```

### 5.3 ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ãƒ˜ãƒƒãƒ€ãƒ¼                  â”‚
â”‚  ãƒ­ã‚´  ãƒ¡ãƒ‹ãƒ¥ãƒ¼  ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚                                     â”‚
â”‚           ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„          â”‚
â”‚                                     â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           ãƒ•ãƒƒã‚¿ãƒ¼ï¼ˆPWAæ™‚ã¯éè¡¨ç¤ºï¼‰ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. é–‹ç™ºã‚¹ãƒ†ãƒƒãƒ—

### ã‚¹ãƒ†ãƒƒãƒ—1: ç’°å¢ƒæ§‹ç¯‰ âœ… å®Œäº†
- [x] Next.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ
- [x] å¿…è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- [x] Tailwind CSSã€shadcn/uiã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [x] åŸºæœ¬çš„ãªãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆã®ä½œæˆ

### ã‚¹ãƒ†ãƒƒãƒ—2: Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— âœ… å®Œäº†
- [x] Supabaseã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
- [x] æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- [x] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆURLãƒ»APIã‚­ãƒ¼ã®å–å¾—
- [x] ç’°å¢ƒå¤‰æ•°ã®è¨­å®šï¼ˆ.env.localï¼‰

> ğŸ“˜ **è©³ç´°æ‰‹é †**: [Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](./setup-supabase.md) ã‚’å‚ç…§

### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®ä½œæˆ âœ… å®Œäº†
- [x] ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆï¼ˆproducts, stock, orders, order_details, usersï¼‰
- [x] ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ä½œæˆ
- [x] ãƒˆãƒªã‚¬ãƒ¼ã®è¨­å®šï¼ˆupdated_atè‡ªå‹•æ›´æ–°ï¼‰
- [x] Row Level Securityï¼ˆRLSï¼‰ãƒãƒªã‚·ãƒ¼ã®è¨­å®š
- [x] åœ¨åº«æ¸›ç®—ç”¨é–¢æ•°ã®ä½œæˆ

> ğŸ“˜ **SQLå®Ÿè¡Œ**: [Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰ - 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒä½œæˆ](./setup-supabase.md#3-ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒä½œæˆ) ã‚’å‚ç…§

### ã‚¹ãƒ†ãƒƒãƒ—4: èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®è¨­å®š âœ… å®Œäº†
- [x] Supabase Authè¨­å®š
- [x] Google OAuth Providerè¨­å®š
- [x] ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURLè¨­å®š
- [x] ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªå‹•ç™»éŒ²ãƒˆãƒªã‚¬ãƒ¼ã®è¨­å®š

> ğŸ“˜ **è©³ç´°æ‰‹é †**: [Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰ - 5. èªè¨¼è¨­å®š](./setup-supabase.md#5-èªè¨¼è¨­å®š) ã‚’å‚ç…§

### ã‚¹ãƒ†ãƒƒãƒ—5: ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®è¨­å®š âœ… å®Œäº†
- [x] Supabase Storageãƒã‚±ãƒƒãƒˆä½œæˆï¼ˆproduct-imagesï¼‰
- [x] Storageãƒãƒªã‚·ãƒ¼ã®è¨­å®š
  - [x] ç”»åƒé–²è¦§ãƒãƒªã‚·ãƒ¼ï¼ˆå…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
  - [x] ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒãƒªã‚·ãƒ¼ï¼ˆèªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
  - [x] ç”»åƒå‰Šé™¤ãƒãƒªã‚·ãƒ¼ï¼ˆèªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
- [x] ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã®æº–å‚™

> ğŸ“˜ **è©³ç´°æ‰‹é †**: [Supabaseã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰ - 4. ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­å®š](./setup-supabase.md#4-ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­å®š) ã‚’å‚ç…§

### ã‚¹ãƒ†ãƒƒãƒ—6: ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ âœ… å®Œäº†
- [x] æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆtemplate_DB.xlsxï¼‰
- [x] ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ
  - [x] å•†å“ãƒ‡ãƒ¼ã‚¿ç§»è¡Œï¼ˆ30ä»¶ï¼‰
  - [x] åœ¨åº«ãƒ‡ãƒ¼ã‚¿ç§»è¡Œï¼ˆ30ä»¶ï¼‰
  - [x] æ³¨æ–‡ãƒ‡ãƒ¼ã‚¿ç§»è¡Œï¼ˆ5ä»¶ï¼‰
  - [x] æ³¨æ–‡è©³ç´°ãƒ‡ãƒ¼ã‚¿ç§»è¡Œï¼ˆ40ä»¶ï¼‰
- [x] Supabaseã¸ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- [x] ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯

> ğŸ“˜ **ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: `scripts/migrate-to-supabase.ts` ã‚’ä½œæˆ

### ã‚¹ãƒ†ãƒƒãƒ—7: Supabase Clientã®å®Ÿè£… âœ… å®Œäº†
- [x] ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
  ```bash
  npm install @supabase/supabase-js @supabase/ssr
  ```
- [x] Supabase ClientåˆæœŸåŒ–
  - [x] ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ç”¨ï¼ˆlib/supabase.tsï¼‰
  - [x] ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ç”¨ï¼ˆlib/supabase-server.tsï¼‰
- [x] TypeScriptå‹å®šç¾©ç”Ÿæˆ
  ```bash
  supabase gen types typescript --project-id [project-ref] > types/supabase.ts
  ```
- [x] èªè¨¼ãƒ•ãƒƒã‚¯ã®å®Ÿè£…

### ã‚¹ãƒ†ãƒƒãƒ—8: èªè¨¼æ©Ÿèƒ½ã®å®Ÿè£… âœ… å®Œäº†
- [x] ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®å®Ÿè£…ï¼ˆSupabase Authï¼‰
- [x] ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
- [x] ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- [x] èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
- [x] ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—

### ã‚¹ãƒ†ãƒƒãƒ—9: APIå®Ÿè£…ï¼ˆSupabaseç‰ˆï¼‰ âœ… å®Œäº†
- [x] å•†å“API
  - [x] å•†å“ä¸€è¦§å–å¾—ï¼ˆGET /api/productsï¼‰
  - [x] å•†å“è©³ç´°å–å¾—ï¼ˆGET /api/products/[id]ï¼‰
  - [x] å•†å“ä½œæˆï¼ˆPOST /api/productsï¼‰
  - [x] å•†å“æ›´æ–°ï¼ˆPUT /api/products/[id]ï¼‰
  - [x] å•†å“å‰Šé™¤ï¼ˆDELETE /api/products/[id]ï¼‰
- [x] åœ¨åº«API
  - [x] åœ¨åº«ä¸€è¦§å–å¾—ï¼ˆGET /api/stockï¼‰
  - [x] åœ¨åº«æ›´æ–°ï¼ˆPUT /api/stockï¼‰
  - [x] ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³ï¼ˆPOST /api/stock/scanï¼‰
- [x] æ³¨æ–‡API
  - [x] æ³¨æ–‡ä¸€è¦§å–å¾—ï¼ˆGET /api/ordersï¼‰
  - [x] æ³¨æ–‡è©³ç´°å–å¾—ï¼ˆGET /api/orders/[id]ï¼‰
  - [x] æ³¨æ–‡ä½œæˆï¼ˆPOST /api/ordersï¼‰
- [x] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰API
  - [x] å£²ä¸Šçµ±è¨ˆï¼ˆGET /api/dashboardï¼‰
  - [x] å•†å“ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆGET /api/dashboard/rankingï¼‰
- [x] ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰API
  - [x] ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆPOST /api/products/[id]/imageï¼‰
  - [x] ç”»åƒå‰Šé™¤ï¼ˆDELETE /api/products/[id]/imageï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—10: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£… âœ… å®Œäº†
- [x] èªè¨¼ç”»é¢ã®å®Ÿè£…
  - [x] ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
  - [x] èªè¨¼ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†
- [x] å•†å“ç®¡ç†ç”»é¢
  - [x] å•†å“ä¸€è¦§ï¼ˆSKUå…¥ã‚Œå­æ§‹é€ ï¼‰
  - [x] å•†å“æ¤œç´¢æ©Ÿèƒ½
  - [x] å•†å“è©³ç´°ãƒ»ç·¨é›†
- [x] åœ¨åº«ç®¡ç†ç”»é¢
  - [x] åœ¨åº«ä¸€è¦§è¡¨ç¤º
  - [x] åœ¨åº«æ•°é‡æ›´æ–°
  - [x] ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³
- [x] æ³¨æ–‡ç®¡ç†ç”»é¢
  - [x] æ³¨æ–‡ä¸€è¦§è¡¨ç¤º
  - [x] æ³¨æ–‡è©³ç´°è¡¨ç¤º
  - [x] æ–°è¦æ³¨æ–‡ä½œæˆ
  - [x] ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³ã«ã‚ˆã‚‹å•†å“è¿½åŠ 
- [x] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
  - [x] å£²ä¸Šæ¨ç§»ã‚°ãƒ©ãƒ•
  - [x] æ³¨æ–‡æ•°ã‚µãƒãƒªãƒ¼
  - [x] åœ¨åº«æƒ…å ±ã‚µãƒãƒªãƒ¼
  - [x] å•†å“åˆ¥å£²ä¸Šåˆ†æ

### ã‚¹ãƒ†ãƒƒãƒ—11: å•†å“ç”»åƒç®¡ç†æ©Ÿèƒ½ã®å®Ÿè£… âœ… å®Œäº†
- [x] ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  - [x] ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠUIï¼ˆreact-dropzoneï¼‰
  - [x] ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½
  - [x] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚µã‚¤ã‚ºã€å½¢å¼ã€å®¹é‡ï¼‰
- [x] å•†å“è©³ç´°ç”»é¢ã¸ã®çµ±åˆ
  - [x] ç”»åƒè¡¨ç¤ºã‚¨ãƒªã‚¢
  - [x] ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³
  - [x] ç”»åƒå‰Šé™¤æ©Ÿèƒ½
- [x] å•†å“ä¸€è¦§ã¸ã®ã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤º
  - [x] ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒã®è¡¨ç¤º
  - [x] ç”»åƒèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
  - [x] é…å»¶èª­ã¿è¾¼ã¿ï¼ˆLazy Loadingï¼‰
- [x] æ³¨æ–‡ç”»é¢ã¸ã®ç”»åƒè¡¨ç¤º
  - [x] æ–°è¦æ³¨æ–‡ç”»é¢ã§ã®å•†å“ç”»åƒè¡¨ç¤º
  - [x] æ³¨æ–‡è©³ç´°ç”»é¢ã§ã®å•†å“ç”»åƒè¡¨ç¤º

### ã‚¹ãƒ†ãƒƒãƒ—12: CSVå…¥å‡ºåŠ›æ©Ÿèƒ½ã®å®Ÿè£… âœ… å®Œäº†
- [x] CSVãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- [x] CSVã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ‘ãƒ¼ã‚¹
- [x] Supabaseã¸ã®ä¸€æ‹¬æ›´æ–°

### ã‚¹ãƒ†ãƒƒãƒ—13: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ã®å®Ÿè£… âœ… å®Œäº†
- [x] åœ¨åº«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
- [x] æ³¨æ–‡ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥
- [x] è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼åŒæ™‚ç·¨é›†å¯¾å¿œ

### ã‚¹ãƒ†ãƒƒãƒ—14: PWAå¯¾å¿œ âœ… å®Œäº†
- [x] Web App Manifestã®ä½œæˆ
- [x] Service Workerã®å®Ÿè£…
- [x] ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼ˆSupabaseå¯¾å¿œï¼‰
- [x] ã‚¢ã‚¤ã‚³ãƒ³ã®ä½œæˆ

### ã‚¹ãƒ†ãƒƒãƒ—15: ãƒ†ã‚¹ãƒˆ ğŸ”„ é€²è¡Œä¸­
- [x] æ‰‹å‹•ãƒ†ã‚¹ãƒˆï¼ˆåŸºæœ¬æ©Ÿèƒ½ï¼‰
  - [x] ãƒ­ã‚°ã‚¤ãƒ³ãƒ»èªè¨¼ãƒ•ãƒ­ãƒ¼
  - [x] åœ¨åº«ç®¡ç†æ©Ÿèƒ½
  - [x] æ³¨æ–‡ä½œæˆãƒ•ãƒ­ãƒ¼
  - [x] ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³
  - [x] ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- [ ] è‡ªå‹•ãƒ†ã‚¹ãƒˆï¼ˆä»Šå¾Œå®Ÿè£…äºˆå®šï¼‰
  - [ ] å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆAPIé–¢æ•°ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰
  - [ ] çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆèªè¨¼ã€æ³¨æ–‡ãƒ•ãƒ­ãƒ¼ï¼‰
  - [ ] E2Eãƒ†ã‚¹ãƒˆï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªï¼‰
  - [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆã‚¯ã‚¨ãƒªé€Ÿåº¦ã€ç”»åƒèª­ã¿è¾¼ã¿ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—16: ãƒ‡ãƒ—ãƒ­ã‚¤ âœ… å®Œäº†
- [x] ç’°å¢ƒå¤‰æ•°ã®æº–å‚™ï¼ˆ.env.localï¼‰
- [x] ãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
- [x] Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆGitHubé€£æºã€è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®šå®Œäº†ï¼‰
- [x] æœ¬ç•ªç’°å¢ƒã§ã®å‹•ä½œç¢ºèªï¼ˆãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤ºç¢ºèªæ¸ˆã¿ï¼‰
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã®è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

> ğŸ“˜ **è©³ç´°**: [Vercelãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰](./vercel-deployment.md) ã‚’å‚ç…§

---

## ğŸ¯ ç¾åœ¨ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—çŠ¶æ³ï¼ˆ2026å¹´2æœˆ11æ—¥æ›´æ–°ï¼‰

### âœ… å®Œäº†æ¸ˆã¿ï¼ˆã™ã¹ã¦ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼†ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ï¼ï¼‰
1. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š** - `.env.local`ã«Supabaseæ¥ç¶šæƒ…å ±ã‚’è¨­å®šå®Œäº†
2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®ä½œæˆ** - `complete-setup.sql`ã‚’å®Ÿè¡Œæ¸ˆã¿
   - ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆï¼ˆproducts, stock, orders, order_details, usersï¼‰
   - ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŠ•å…¥ï¼ˆå•†å“30ä»¶ã€åœ¨åº«30ä»¶ã€æ³¨æ–‡5ä»¶ï¼‰
   - Row Level Security (RLS) ãƒãƒªã‚·ãƒ¼è¨­å®š
   - Realtimeæœ‰åŠ¹åŒ–
3. **Storageãƒã‚±ãƒƒãƒˆã®ä½œæˆ** - `product-images`ãƒã‚±ãƒƒãƒˆä½œæˆå®Œäº†
4. **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒãƒªã‚·ãƒ¼ã®è¨­å®š** - `setup-storage.sql`å®Ÿè¡Œå®Œäº†
5. **Google OAuthèªè¨¼ã®è¨­å®š** - Supabaseå´ãƒ»Google Cloud Consoleå´ã®è¨­å®šå®Œäº†
6. **å‹•ä½œç¢ºèªï¼ˆé–‹ç™ºç’°å¢ƒï¼‰** - ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª
   - âœ… ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½
   - âœ… ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º
   - âœ… åœ¨åº«ç®¡ç†æ©Ÿèƒ½
   - âœ… ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³
   - âœ… æ³¨æ–‡ç®¡ç†æ©Ÿèƒ½
   - âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
   - âœ… PWAæ©Ÿèƒ½
7. **Vercelæœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤** - GitHubé€£æºãƒ»è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®šå®Œäº†
   - âœ… GitHubãƒªãƒã‚¸ãƒˆãƒªé€£æº
   - âœ… Root Directoryè¨­å®šï¼ˆPWA/final-app1ï¼‰
   - âœ… ç’°å¢ƒå¤‰æ•°è¨­å®šï¼ˆSupabaseæ¥ç¶šæƒ…å ±ï¼‰
   - âœ… TypeScriptãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼å…¨ä»¶ä¿®æ­£ï¼ˆ50ç®‡æ‰€ä»¥ä¸Šï¼‰
   - âœ… ãƒ“ãƒ«ãƒ‰æˆåŠŸãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†
8. **å‹•ä½œç¢ºèªï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰** - Vercelä¸Šã§æ­£å¸¸å‹•ä½œã‚’ç¢ºèª
   - âœ… ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ï¼ˆGoogle OAuthï¼‰
   - âœ… ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º

### ğŸš€ ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒä¸­ï¼ˆé–‹ç™ºç’°å¢ƒï¼†æœ¬ç•ªç’°å¢ƒï¼‰
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯é–‹ç™ºç’°å¢ƒãƒ»æœ¬ç•ªç’°å¢ƒã®ä¸¡æ–¹ã§å‹•ä½œå¯èƒ½ãªçŠ¶æ…‹ã§ã™ã€‚
- **é–‹ç™ºç’°å¢ƒ**: http://localhost:3000
- **æœ¬ç•ªç’°å¢ƒ**: Vercelï¼ˆGitHubé€£æºã«ã‚ˆã‚‹è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Supabase PostgreSQL
- **èªè¨¼**: Google OAuth
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: Supabase Storage
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ **: Supabase Realtime

### ğŸ“‹ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è¨­å®š
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã®è¨­å®š
- è‡ªå‹•ãƒ†ã‚¹ãƒˆã®å®Ÿè£…
- è¿½åŠ æ©Ÿèƒ½ã®å®Ÿè£…

### ğŸ“š å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [ã‚«ãƒ¡ãƒ©ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](./CAMERA-TROUBLESHOOTING.md) - ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³æ™‚ã®ã‚«ãƒ¡ãƒ©å•é¡Œå¯¾å‡¦æ³•
- [å®Œå…¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](./COMPLETE-SETUP-GUIDE.md) - ç·åˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †
- [Storageã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](./STORAGE-SETUP-GUIDE.md) - ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­å®š
- [Realtimeã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](./REALTIME-SETUP-GUIDE.md) - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½è¨­å®š

---

## è£œè¶³äº‹é …

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …
- Google OAuthèªè¨¼ã«ã‚ˆã‚‹å®‰å…¨ãªãƒ­ã‚°ã‚¤ãƒ³
- API Routesã§ã®ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰å‡¦ç†
- ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹æ©Ÿå¯†æƒ…å ±ã®ç®¡ç†
- CORSè¨­å®šã®é©åˆ‡ãªå®Ÿè£…

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …
- Spreadsheetãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
- ç”»åƒã®æœ€é©åŒ–
- ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ—ãƒªãƒƒãƒ†ã‚£ãƒ³ã‚°
- Service Workerã«ã‚ˆã‚‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥

### ä»Šå¾Œã®æ‹¡å¼µå¯èƒ½æ€§

#### çŸ­æœŸï¼ˆSupabaseåŸºæœ¬æ©Ÿèƒ½ï¼‰
- âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åœ¨åº«æ›´æ–°**ï¼ˆSupabase Realtimeï¼‰
- âœ… **è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼åŒæ™‚ç·¨é›†**ï¼ˆSupabase Realtimeï¼‰
- âœ… **é«˜åº¦ãªæ¤œç´¢æ©Ÿèƒ½**ï¼ˆPostgreSQLå…¨æ–‡æ¤œç´¢ï¼‰
- âœ… **ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ**ï¼ˆPostgreSQLã®é›†è¨ˆé–¢æ•°ï¼‰
- å•†å“ç”»åƒã®ä¸€æ‹¬ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- ç”»åƒç·¨é›†æ©Ÿèƒ½ï¼ˆãƒˆãƒªãƒŸãƒ³ã‚°ã€ãƒªã‚µã‚¤ã‚ºï¼‰
- è¤‡æ•°ç”»åƒç™»éŒ²ï¼ˆãƒ¡ã‚¤ãƒ³ç”»åƒ + ã‚µãƒ–ç”»åƒï¼‰

#### ä¸­æœŸï¼ˆæ¥­å‹™æ‹¡å¼µï¼‰
- è¤‡æ•°åº—èˆ—å¯¾å¿œ
  - åº—èˆ—ãƒã‚¹ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«
  - åº—èˆ—åˆ¥åœ¨åº«ç®¡ç†
  - åº—èˆ—é–“åœ¨åº«ç§»å‹•
- ç™ºæ³¨ç®¡ç†æ©Ÿèƒ½
  - ç™ºæ³¨æ›¸ä½œæˆ
  - ä»•å…¥å…ˆãƒã‚¹ã‚¿
  - ç™ºæ³¨å±¥æ­´ç®¡ç†
- æ£šå¸ã—æ©Ÿèƒ½
  - æ£šå¸ã—ãƒ‡ãƒ¼ã‚¿å…¥åŠ›
  - å®Ÿåœ¨åº«ã¨ã®å·®ç•°ãƒã‚§ãƒƒã‚¯
  - åœ¨åº«èª¿æ•´å‡¦ç†

#### é•·æœŸï¼ˆé«˜åº¦ãªæ©Ÿèƒ½ï¼‰
- ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›æ©Ÿèƒ½ï¼ˆPDFï¼‰
  - å£²ä¸Šãƒ¬ãƒãƒ¼ãƒˆ
  - åœ¨åº«ãƒ¬ãƒãƒ¼ãƒˆ
  - ç™ºæ³¨ãƒ¬ãƒãƒ¼ãƒˆ
- åœ¨åº«äºˆæ¸¬æ©Ÿèƒ½ï¼ˆæ©Ÿæ¢°å­¦ç¿’ï¼‰
  - å£²ä¸Šäºˆæ¸¬
  - é©æ­£åœ¨åº«ã®ç®—å‡º
  - ç™ºæ³¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®ææ¡ˆ
- ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªå¯¾å¿œ
  - React Native + Supabase
  - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
  - ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
- APIå…¬é–‹
  - REST API
  - GraphQL API
  - Webhooké€£æº

---

## ä»˜éŒ²

### ç”¨èªé›†
| ç”¨èª | èª¬æ˜ |
|------|------|
| SKU | Stock Keeping Unitï¼ˆåœ¨åº«ç®¡ç†å˜ä½ï¼‰ |
| JANã‚³ãƒ¼ãƒ‰ | Japanese Article Numberï¼ˆå•†å“è­˜åˆ¥ã‚³ãƒ¼ãƒ‰ï¼‰ |
| PWA | Progressive Web Application |
| SSO | Single Sign-Onï¼ˆã‚·ãƒ³ã‚°ãƒ«ã‚µã‚¤ãƒ³ã‚ªãƒ³ï¼‰ |

### å‚è€ƒãƒªãƒ³ã‚¯
- [Next.js å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nextjs.org/docs)
- [Google Sheets API](https://developers.google.com/sheets/api)
- [NextAuth.js](https://next-auth.js.org/)
- [html5-qrcode](https://github.com/mebjas/html5-qrcode)

---

## 7. å•†å“ç”»åƒç®¡ç†ã®æŠ€è¡“ä»•æ§˜

### 7.1 ç”»åƒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®é¸æŠè‚¢

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: Vercel Blob Storageï¼ˆæ¨å¥¨ï¼‰
**ãƒ¡ãƒªãƒƒãƒˆ**:
- Vercelã¨ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªçµ±åˆ
- ç°¡å˜ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- è‡ªå‹•çš„ãªCDNé…ä¿¡
- ç„¡æ–™æ : 500MB

**å®Ÿè£…æ–¹æ³•**:
```typescript
import { put } from '@vercel/blob';

const blob = await put('product-images/123.jpg', file, {
  access: 'public',
});
// blob.url ã‚’å•†å“ã‚·ãƒ¼ãƒˆã«ä¿å­˜
```

**ç’°å¢ƒå¤‰æ•°**:
```
BLOB_READ_WRITE_TOKEN=vercel_blob_xxxxx
```

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: Cloudinary
**ãƒ¡ãƒªãƒƒãƒˆ**:
- ç”»åƒå¤‰æ›ãƒ»æœ€é©åŒ–æ©Ÿèƒ½ãŒè±Šå¯Œ
- ã‚µãƒ ãƒã‚¤ãƒ«è‡ªå‹•ç”Ÿæˆ
- ç„¡æ–™æ : 25GB

**å®Ÿè£…æ–¹æ³•**:
```typescript
import { v2 as cloudinary } from 'cloudinary';

const result = await cloudinary.uploader.upload(file);
// result.secure_url ã‚’å•†å“ã‚·ãƒ¼ãƒˆã«ä¿å­˜
```

**ç’°å¢ƒå¤‰æ•°**:
```
CLOUDINARY_CLOUD_NAME=xxxxx
CLOUDINARY_API_KEY=xxxxx
CLOUDINARY_API_SECRET=xxxxx
```

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³3: Google Cloud Storage
**ãƒ¡ãƒªãƒƒãƒˆ**:
- æ—¢ã«Google Sheets APIã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚çµ±åˆãŒå®¹æ˜“
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ãŒé«˜ã„
- è©³ç´°ãªã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

**å®Ÿè£…æ–¹æ³•**:
```typescript
import { Storage } from '@google-cloud/storage';

const storage = new Storage();
const bucket = storage.bucket('product-images');
const file = bucket.file('123.jpg');
await file.save(buffer);
const publicUrl = file.publicUrl();
// publicUrl ã‚’å•†å“ã‚·ãƒ¼ãƒˆã«ä¿å­˜
```

**ç’°å¢ƒå¤‰æ•°**:
```
GCS_BUCKET_NAME=your-bucket-name
GOOGLE_APPLICATION_CREDENTIALS=path/to/service-account.json
```

### 7.2 APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¨­è¨ˆ

#### POST /api/products/[id]/image
å•†å“ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```typescript
Content-Type: multipart/form-data
{
  file: File // ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  imageUrl: "https://...",
  message: "ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ"
}
```

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**:
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: æœ€å¤§5MB
- ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼: image/jpeg, image/png, image/webp
- ç”»åƒã‚µã‚¤ã‚º: æœ€å¤§1200x1200px

#### DELETE /api/products/[id]/image
å•†å“ç”»åƒã®å‰Šé™¤

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  message: "ç”»åƒã‚’å‰Šé™¤ã—ã¾ã—ãŸ"
}
```

#### PUT /api/products/[id]/image-url
å¤–éƒ¨URLã‹ã‚‰ç”»åƒã‚’ç™»éŒ²

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```typescript
{
  imageUrl: "https://example.com/image.jpg"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```typescript
{
  success: true,
  imageUrl: "https://example.com/image.jpg",
  message: "ç”»åƒURLã‚’ç™»éŒ²ã—ã¾ã—ãŸ"
}
```

### 7.3 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ
```
src/components/products/
â”œâ”€â”€ image-upload.tsx          # ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ image-preview.tsx         # ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ image-thumbnail.tsx       # ã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â””â”€â”€ image-dropzone.tsx        # ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã‚¨ãƒªã‚¢
```

#### ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ãƒ­ãƒ¼
```typescript
// 1. ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
const handleFileSelect = (file: File) => {
  // 2. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  if (!validateImage(file)) return;
  
  // 3. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
  setPreviewUrl(URL.createObjectURL(file));
  
  // 4. ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
  const formData = new FormData();
  formData.append('file', file);
  
  const response = await fetch(`/api/products/${productId}/image`, {
    method: 'POST',
    body: formData,
  });
  
  // 5. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆæ›´æ–°
  const { imageUrl } = await response.json();
  await updateProductImageUrl(productId, imageUrl);
};
```

### 7.4 ç”»åƒæœ€é©åŒ–

#### Next.js Image ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½¿ç”¨
```typescript
import Image from 'next/image';

<Image
  src={product.imageUrl || '/placeholder.png'}
  alt={product.name}
  width={200}
  height={200}
  className="object-cover"
  loading="lazy"
  placeholder="blur"
  blurDataURL="/placeholder-blur.png"
/>
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç”»åƒ
```typescript
<Image
  src={product.imageUrl}
  alt={product.name}
  sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
  fill
  className="object-cover"
/>
```

### 7.5 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

#### ç”»åƒèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼
```typescript
const [imageError, setImageError] = useState(false);

<Image
  src={imageError ? '/placeholder.png' : product.imageUrl}
  onError={() => setImageError(true)}
  alt={product.name}
/>
```

#### ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼
```typescript
try {
  await uploadImage(file);
} catch (error) {
  if (error.code === 'FILE_TOO_LARGE') {
    toast.error('ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãã™ãã¾ã™ï¼ˆæœ€å¤§5MBï¼‰');
  } else if (error.code === 'INVALID_FORMAT') {
    toast.error('å¯¾å¿œã—ã¦ã„ãªã„ç”»åƒå½¢å¼ã§ã™');
  } else {
    toast.error('ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ');
  }
}
```

### 7.6 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

#### ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
```typescript
const validateImage = (file: File): boolean => {
  // MIMEã‚¿ã‚¤ãƒ—ãƒã‚§ãƒƒã‚¯
  const allowedTypes = ['image/jpeg', 'image/png', 'image/webp'];
  if (!allowedTypes.includes(file.type)) {
    return false;
  }
  
  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯
  const maxSize = 5 * 1024 * 1024; // 5MB
  if (file.size > maxSize) {
    return false;
  }
  
  // ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­ãƒã‚§ãƒƒã‚¯
  const allowedExtensions = ['.jpg', '.jpeg', '.png', '.webp'];
  const extension = file.name.toLowerCase().match(/\.[^.]+$/)?.[0];
  if (!extension || !allowedExtensions.includes(extension)) {
    return false;
  }
  
  return true;
};
```

#### ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
```typescript
// API Route
export async function POST(request: Request) {
  const formData = await request.formData();
  const file = formData.get('file') as File;
  
  // ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯
  if (file.size > 5 * 1024 * 1024) {
    return NextResponse.json(
      { error: 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãã™ãã¾ã™' },
      { status: 400 }
    );
  }
  
  // MIMEã‚¿ã‚¤ãƒ—ãƒã‚§ãƒƒã‚¯
  const allowedTypes = ['image/jpeg', 'image/png', 'image/webp'];
  if (!allowedTypes.includes(file.type)) {
    return NextResponse.json(
      { error: 'å¯¾å¿œã—ã¦ã„ãªã„ç”»åƒå½¢å¼ã§ã™' },
      { status: 400 }
    );
  }
  
  // ç”»åƒã®å®Ÿéš›ã®å†…å®¹ã‚’æ¤œè¨¼ï¼ˆãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ãƒã‚§ãƒƒã‚¯ï¼‰
  const buffer = await file.arrayBuffer();
  const isValidImage = await validateImageBuffer(buffer);
  if (!isValidImage) {
    return NextResponse.json(
      { error: 'ä¸æ­£ãªç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã§ã™' },
      { status: 400 }
    );
  }
  
  // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
  // ...
}
```

### 7.7 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### é…å»¶èª­ã¿è¾¼ã¿ï¼ˆLazy Loadingï¼‰
```typescript
// å•†å“ä¸€è¦§ã§ã®ã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤º
<Image
  src={product.imageUrl}
  alt={product.name}
  loading="lazy"
  width={100}
  height={100}
/>
```

#### ç”»åƒã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
```typescript
// next.config.ts
const nextConfig = {
  images: {
    domains: ['your-storage-domain.com'],
    formats: ['image/webp', 'image/avif'],
    minimumCacheTTL: 60 * 60 * 24 * 30, // 30æ—¥
  },
};
```

#### ãƒ—ãƒ­ã‚°ãƒ¬ãƒƒã‚·ãƒ–ç”»åƒèª­ã¿è¾¼ã¿
```typescript
<Image
  src={product.imageUrl}
  placeholder="blur"
  blurDataURL={product.thumbnailUrl || '/blur-placeholder.png'}
  alt={product.name}
/>
```

### 7.8 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆï¼‰æ›´æ–°

#### ç”»åƒURLä¿å­˜å‡¦ç†
```typescript
// lib/sheets.ts
export async function updateProductImage(
  productId: number,
  imageUrl: string
): Promise<void> {
  const sheets = google.sheets({ version: 'v4', auth });
  
  // å•†å“IDã‹ã‚‰è¡Œç•ªå·ã‚’å–å¾—
  const rowIndex = await findProductRowIndex(productId);
  
  // ç”»åƒURLã‚«ãƒ©ãƒ ï¼ˆCåˆ—ï¼‰ã‚’æ›´æ–°
  await sheets.spreadsheets.values.update({
    spreadsheetId: process.env.SPREADSHEET_ID,
    range: `å•†å“!C${rowIndex}`,
    valueInputOption: 'RAW',
    requestBody: {
      values: [[imageUrl]],
    },
  });
  
  // æ›´æ–°æ—¥æ™‚ã‚‚æ›´æ–°
  await sheets.spreadsheets.values.update({
    spreadsheetId: process.env.SPREADSHEET_ID,
    range: `å•†å“!J${rowIndex}`,
    valueInputOption: 'RAW',
    requestBody: {
      values: [[new Date().toISOString()]],
    },
  });
}
```

---

*ä½œæˆæ—¥: 2026å¹´2æœˆ4æ—¥*
*æœ€çµ‚æ›´æ–°æ—¥: 2026å¹´2æœˆ11æ—¥*
*ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 2.0ï¼ˆSupabaseç§»è¡Œç‰ˆï¼‰*

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

### Supabaseã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½

#### 1. Row Level Securityï¼ˆRLSï¼‰
Supabaseã®å¼·åŠ›ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã€‚è¡Œãƒ¬ãƒ™ãƒ«ã§ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚’å®Ÿè£…ã€‚

**products ãƒ†ãƒ¼ãƒ–ãƒ«:**
```sql
-- å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèª­ã¿å–ã‚Šå¯èƒ½
CREATE POLICY "products_select_policy" ON products
  FOR SELECT USING (true);

-- èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿æŒ¿å…¥ãƒ»æ›´æ–°å¯èƒ½
CREATE POLICY "products_insert_policy" ON products
  FOR INSERT WITH CHECK (auth.role() = 'authenticated');

-- ç®¡ç†è€…ã®ã¿å‰Šé™¤å¯èƒ½
CREATE POLICY "products_delete_policy" ON products
  FOR DELETE USING (
    EXISTS (
      SELECT 1 FROM users
      WHERE users.id = auth.uid() AND users.role = 'admin'
    )
  );
```

**orders ãƒ†ãƒ¼ãƒ–ãƒ«:**
```sql
-- èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
CREATE POLICY "orders_select_policy" ON orders
  FOR SELECT USING (auth.role() = 'authenticated');
```

#### 2. èªè¨¼ãƒ»èªå¯ï¼ˆSupabase Authï¼‰
- âœ… Google OAuth 2.0ã«ã‚ˆã‚‹å®‰å…¨ãªãƒ­ã‚°ã‚¤ãƒ³
- âœ… JWTï¼ˆJSON Web Tokenï¼‰ã«ã‚ˆã‚‹èªè¨¼
- âœ… ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®è‡ªå‹•åŒ–
- âœ… ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã®è‡ªå‹•æ›´æ–°
- âœ… ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ¬ã‚¹èªè¨¼å¯¾å¿œ

#### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- âœ… **å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„**: ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ä¿è¨¼
- âœ… **CHECKåˆ¶ç´„**: ä¸æ­£ãªå€¤ã®æŒ¿å…¥ã‚’é˜²æ­¢
- âœ… **ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³**: ACIDä¿è¨¼
- âœ… **SSL/TLSæš—å·åŒ–**: é€šä¿¡ã®æš—å·åŒ–
- âœ… **è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: ãƒ‡ãƒ¼ã‚¿ä¿è­·ï¼ˆ7æ—¥é–“ä¿æŒï¼‰

#### 4. APIã‚­ãƒ¼ç®¡ç†
| ã‚­ãƒ¼ | ç”¨é€” | å…¬é–‹ | æ¨©é™ |
|------|------|------|------|
| `NEXT_PUBLIC_SUPABASE_URL` | Supabase URL | âœ… å…¬é–‹å¯ | - |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | åŒ¿åã‚­ãƒ¼ | âœ… å…¬é–‹å¯ | RLSé©ç”¨ |
| `SUPABASE_SERVICE_ROLE_KEY` | ç®¡ç†è€…ã‚­ãƒ¼ | âŒ ç§˜å¯† | RLSãƒã‚¤ãƒ‘ã‚¹ |

> âš ï¸ **é‡è¦**: `SERVICE_ROLE_KEY` ã¯çµ¶å¯¾ã«å…¬é–‹ã—ãªã„ã§ãã ã•ã„

#### 5. å…¥åŠ›å€¤æ¤œè¨¼
- âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰æ¤œè¨¼ï¼ˆå³åº§ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰
- âœ… ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰æ¤œè¨¼ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¿è¨¼ï¼‰
- âœ… PostgreSQLåˆ¶ç´„ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¬ãƒ™ãƒ«ï¼‰
- âœ… XSSå¯¾ç­–ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ï¼ˆSupabase ClientãŒè‡ªå‹•å¯¾å¿œï¼‰

#### 6. ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
```typescript
// Supabase Storageãƒãƒªã‚·ãƒ¼
CREATE POLICY "product_images_insert_policy"
ON storage.objects FOR INSERT
WITH CHECK (
  bucket_id = 'product-images'
  AND auth.role() = 'authenticated'
  AND (storage.foldername(name))[1] = 'products'
);
```

- âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆ5MBï¼‰
- âœ… MIMEã‚¿ã‚¤ãƒ—æ¤œè¨¼
- âœ… ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­æ¤œè¨¼
- âœ… èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯èƒ½

#### 7. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆVercelï¼‰
```json
// vercel.json
{
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        { "key": "X-Frame-Options", "value": "DENY" },
        { "key": "X-Content-Type-Options", "value": "nosniff" },
        { "key": "X-XSS-Protection", "value": "1; mode=block" },
        { "key": "Referrer-Policy", "value": "strict-origin-when-cross-origin" }
      ]
    }
  ]
}
```

#### 8. ç’°å¢ƒå¤‰æ•°ã®ä¿è­·
- âœ… `.gitignore` ã«ã‚ˆã‚‹æ©Ÿå¯†æƒ…å ±ã®é™¤å¤–
- âœ… `.env.example` ãƒ•ã‚¡ã‚¤ãƒ«ã®æä¾›
- âœ… Vercelç’°å¢ƒå¤‰æ•°ã®æš—å·åŒ–ä¿å­˜
- âœ… æœ¬ç•ªç’°å¢ƒã¨ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®åˆ†é›¢

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **å¸¸ã«RLSã‚’æœ‰åŠ¹åŒ–**
   ```sql
   ALTER TABLE table_name ENABLE ROW LEVEL SECURITY;
   ```

2. **æœ€å°æ¨©é™ã®åŸå‰‡**
   - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã¯ `anon key` ã®ã¿ä½¿ç”¨
   - ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å¿…è¦ãªå ´åˆã®ã¿ `service_role key` ä½¿ç”¨

3. **å…¥åŠ›å€¤ã®å¤šå±¤æ¤œè¨¼**
   - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ â†’ ã‚µãƒ¼ãƒãƒ¼ â†’ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

4. **å®šæœŸçš„ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»**
   - Supabase Dashboardã§ãƒ­ã‚°ç¢ºèª
   - ç•°å¸¸ãªã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œå‡º

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Supabaseã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰](https://supabase.com/docs/guides/auth/row-level-security)
- [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åˆ†æãƒ¬ãƒãƒ¼ãƒˆ](./security-analysis.md)
- [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–å®Ÿè£…ã‚¬ã‚¤ãƒ‰](./security-implementation.md)

---

## å¤‰æ›´å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜ | å¤‰æ›´å†…å®¹ |
|------------|------|----------|
| 1.0 | 2026/02/04 | åˆç‰ˆä½œæˆï¼ˆGoogle Sheetsç‰ˆï¼‰ |
| 1.1 | 2026/02/04 | template_DB.xlsx ã®å®Ÿãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«åŸºã¥ãDBè¨­è¨ˆã‚’æ›´æ–°ã€CSVä»•æ§˜è¿½åŠ  |
| 1.2 | 2026/02/04 | ãƒ¦ãƒ¼ã‚¶ãƒã‚¹ã‚¿ã‚·ãƒ¼ãƒˆã‚’è¿½åŠ ã€ERå›³æ›´æ–° |
| 1.3 | 2026/02/06 | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã®å®Ÿæ–½ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ  |
| 1.4 | 2026/02/07 | å•†å“ç”»åƒç®¡ç†æ©Ÿèƒ½ã®è¦ä»¶è¿½åŠ  |
| 2.0 | 2026/02/07 | **Supabaseç§»è¡Œç‰ˆã¨ã—ã¦å…¨é¢æ”¹è¨‚**ï¼ˆPostgreSQLã€Supabase Authã€Supabase Storageï¼‰ |
| 2.1 | 2026/02/11 | Vercelæœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ã€TypeScriptãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼å…¨ä»¶ä¿®æ­£ã€é€²æ—æ›´æ–° |
